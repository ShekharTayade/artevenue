{% extends 'artevenue/estore_base.html' %}
{% load static %}
{% load utils %}
{% load customer_review from customer_review %}
{% load indian_numbers_tags %}

{% block estore-title %}
	<title>Hand-picked sets of 2 or 3 wall art paintings. 
		Options to choose size, print medium, frame and mount.</title>
{% endblock estore-title %}


{% block page-description %}
<meta name="description" content="Buy set of paintings for home walls. Choose from standard sizes or customize it exactly as you like. Use size guide and wall color tool to see how it will look.">
{% endblock page-description %}
  
{% block page-keywords %}
<meta name="keywords" content="set of paintings, wall art painting, painting for bedroob, painting for living room, paintings for home walls, paintings for home decore, custom framing, customized wall art">
{% endblock page-keywords %}
  
{% block page-author %}
<meta name="author" content="Arte'venue">
{% endblock page-author %}


{% block jqueryui-stylesheet %}
<link rel="stylesheet" href="{% static 'vendor/jquery-ui-1.12.1/jquery-ui.min.css' %}">
{% endblock jqueryui-stylesheet %}

{% block jqueryui-script %}
<script src="{% static '/vendor/jquery-ui-1.12.1/jquery-ui.min.js' %}"></script>
{% endblock jqueryui-script %}

{% block imagemap-resize-script %}
{% endblock imagemap-resize-script %}


{% load moulding_url %}
{% load update_cart_message from estore_base %}
	<!-- Only Override the site content block -->
	{% block sitecontent %}
        <div id="" class = "container-fluid">
			<div class="row">
				<div class="col-12">
					<!-- breadcrumb-->
					<nav aria-label="breadcrumb">
						<ol class="breadcrumb">
							<li class="breadcrumb-item"><a href="{% url 'index' %}">Home</a></li>
							<li class="breadcrumb-item"><a href="{% url 'stock_collage_products' %}">Artprint Sets</a></li>
							<li class="breadcrumb-item active">{{ collage.product_id }}</li>
						</ol>
					</nav>
				</div>
				<div class="col-12" style = "padding:30px;">
					<div id="productMain" class="row">
						<div class = "d-none d-md-block col-12 col-md-2 img-thumbs">
								<div class = "col-2">
									<img alt ="Set of wall art paintings full view" class = "card-thumb" id = "card0">
								</div>
								<div class = "col-2">
									<img alt ="Set of wall art paintings in living room" class = "card-thumb" id = "card1">
								</div>
								<div class = "col-2">
									<img src = '' alt ="Set of wall art paintings in a room" class = "card-thumb" id = "card2">
								</div>
								<div class = "col-2">
									<img src = '' alt ="Set of wall art paintings in bedroom" class = "card-thumb" id = "card3">
								</div>
								<div class = "col-2">
									<img src = '' alt ="Wall art painting features" class = "card-thumb" id = "card4">
								</div>
								<div class = "col-2">
									<img src = '' alt ="more Wall art painting features" class = "card-thumb" id = "card5">
								</div>
						</div>
						<div class = "d-none d-md-block col-12 col-md-5 img-div">
							<div class = "show_on_large_only mt-5">
								&nbsp;
							</div>
							<div class="item img-magnifier-container" 
									onmouseenter="startMagnify()" 
									onmouseleave="stopMagnify()"
									ontouchstart="startMagnify()" 
									ontouchend="stopMagnify()"
									id = "image-div">
								<img id = "prod-img" src="{% if env == 'DEV' or end == 'TESTING' %} {{ collage.url }} {% else %} {% static collage.url %} {% endif %}" 
										alt="A set of wall art painting: {{collage.product_id}}"  data-action = "zoom" class="img-fluid"
										style = "max-width: 100%; max-height:500px; margin:0px;"/>
							</div>
							<img src = "{% static '/img/licensed_artprint.jpg' %}" alt="Licensed Art Print"
								height = 20>
							<div class = "pull-right">
								<button data-target='tooltip' title = "Add to favourites" 
										class="btn btn-sm" style = "background-color:#fff;"
										onclick="addProdToWishlist({{collage.product_id}},1)">
									<i class="fa fa-heart-o fa-lg" ></i>
								</button>
							</div>
							<div class = "mt-4 d-flex flex-column align-items-center">
								<button class = "btn btn-primary"
									onclick = "show_size_color_tool();">
									Size Guide Wall Color & Tool
								</button>
								<div class = "row">
									<span class = "ml-2" style="font-size:0.7rem;">(How it looks on different wall colors)</span>
								</div>
							</div>
							
						</div>
						<div class = "d-block d-md-none" style = "width: 100%;">
							<div id="card-slider" class="owl-carousel owl-theme">
								<div class="item card-img">
									<img id = "prod-img-card" src="" alt="A set of wall art painting">
								</div>
								<div class="item card-img">
									<img id= "prod-card1" src="" alt="Set of wall art painting in living room">
								</div>
								<div class="item card-img">
									<img id= "prod-card2" src="" alt="Set of wall art painting in a room">
								</div>
								<div class="item card-img">
									<img id= "prod-card3" src="" alt="Set of wall art painting in bedroom" >
								</div>
								<div class="item card-img">
									<img id= "prod-card4" src="" alt="Wall art painting features">
								</div>
								<div class="item card-img">
									<img id= "prod-card5" src="" alt="More wall art painting features" >
								</div>
							</div>
							<img src = "{% static '/img/licensed_artprint.jpg' %}" alt="Licensed Art Print"
								height = 20>
							<div class = "pull-right">
								<button data-target='tooltip' title = "Add to favourites" 
										class="btn btn-sm" style = "background-color:#fff;"
										onclick="addProdToWishlist({{product.product_id}},1)">
									<i class="fa fa-heart-o fa-lg" ></i>
								</button>
							</div>
							<div class = "mt-4 d-flex flex-column align-items-center">
								<button class = "btn btn-primary"
									onclick = "show_size_color_tool();">
									Size Guide Wall Color & Tool
								</button>
								<div class = "row">
									<span class = "ml-2" style="font-size:0.7rem;">(How it looks on different wall colors)</span>
								</div>
							</div>
						</div>
						<div class="col-12 col-md-5">
							<div class = "row">
								<div class = "col-12">
									<div class = "show_on_small_only">
										<div class = " mt-2 row">
										&nbsp;
										</div>
									</div>
									<div class= "pull-left">
										<span id = "prod-name">Set of {{ collage.set_of }}</span><br />
										<span id = "artist">{{collage.stock_image_category.name}}</span>
									</div>
									<div class="price pull-right">
										<div id = "promo-display" style = "display:none">
											<!--<small><i class="fa fa-inr" aria-hidden="true">&nbsp;</i></small>-->
											<small id = "item_unit_price" style = "color:red; text-decoration: line-through;">{{collage.price|floatformat:"0"}}</small>
											<i class="fa fa-inr" aria-hidden="true">&nbsp;</i><span id = "item_total_price" style = "text-decoration: underline;">{{collage.price|floatformat:"0"}}</span>
											<br /><span id = "disc" style = "font-size:0.75rem;" class = "pull-right text-muted"></span>
										</div>	
										<div id = "no-disc">
											<i class="fa fa-inr" aria-hidden="true">&nbsp;</i><span id="prod-price">{{collage.price|floatformat:"0"}}</span>
										</div>
										<div id = "item_unit_price_nv" style = "display:none;"></div>
										<div id = "promotion_id_nv" style = "display:none;"></div>
										<div id = "disc_amt_nv" style = "display:none;"></div>
										<div id = "item_total_price_nv" style = "display:none;"></div>
									</div>
								</div>								
							</div>
							<hr>
							<div class = "row mt-3">
								<div class = "col-6">
									<div class = "row">
										<div class = "col-12" style = "">
											<div id = "print-med" class = "size-title">PRINT SURFACE:</div>
										</div>
										<div class = "col-12">
											<span id="print-surface" title='Choose print surface'
												data-placement="right">
											{% for m in printmedium %}
												{% if m.medium_id != 'NA' %}
													<span id= "m-{{m.medium_id}}" class = "p_size pull-left"
														onclick = "print_medium_change('{{m.medium_id}}'); {% if m.medium_id == 'PAPER' %} $('#mouldings_include_paper').show(); $('#mouldings_include_canvas').hide(); {% else %}  $('#mouldings_include_paper').hide(); $('#mouldings_include_canvas').show();  {% endif %}">
														{{ m.medium_id|upper }}
													</span>
												{% endif %}
											{% endfor printmedium %}
											</span>
										</div>
									</div>									
								</div>
								<div class = "col-6">
									<div class = "row">
										<div class = "col-12">
											<div class = "form-group">
												<div class = "label pull-right" style = "font-size:0.6rem;">
													<input id = "no-frame" type = "checkbox">
													BUY WITHOUT FRAME
												</div>
											</div>
										</div>
										<div class = "col-12 mt-1">
											<div class="label pull-right" style = "font-size:0.6rem;">
												PRINT SIZE: 
												<span id="print-size-display">12" X 9"</span>
											</div>
										</div>
									</div>
								</div>
							</div>

							<div class="row mt-4">
								<div class="col-6 text-center">
									<span style = "font-size:0.75rem;">Finished sizes with frame</span>
								</div>
								<div class="col-6 text-center">
									<span style = "font-size:0.75rem;">Customize size, frame</span>
								</div>
								<div class="col-12">
									<nav class = "nav-justified">		
										<div class="nav nav-tabs nav-fill" id="nav-tab" role="tablist">
											<a class="nav-item nav-link active" id="nav-frame-tab" data-toggle="tab" title = "Choose from ready sizes, framed" href="#nav-frame" role="tab" aria-controls="nav-home" aria-selected="true" >FRAMED</a>
											<a class="nav-item nav-link" id="nav-customize-tab" data-toggle="tab" href="#nav-customize" role="tab" aria-controls="nav-profile" aria-selected="false" data-placement="top" title="Customize Size, Frame etc.">CUSTOMIZE</a>
										</div>
										
									</nav>
								</div>
							</div>

							<div class="tab-content px-sm-0" id="nav-tabContent" style = "padding:0 15px !important;">
								<div class="tab-pane fade show active" id="nav-frame" role="tabpanel" aria-labelledby="nav-frame-tab">
									<div class="row" style = "padding:25px 25px 5px;">										
										<div id = "mouldings_include_paper">
											{% include 'artevenue/ready_sizes_paper.html' %}
										</div>
										<div id = "mouldings_include_canvas" style="display:none;">
											{% include 'artevenue/ready_sizes_canvas.html' %}
										</div>											
									</div>
								</div>
								
								<div class="tab-pane fade" id="nav-customize" role="tabpanel" aria-labelledby="nav-customze-tab">
									<div class="row mt-3">
										<div class="col-12 col-md-6">
											<div id = "print-size" class = "size-title">PRINT SIZE <small style = "color:#828282">(inches)</small>:</div>
											<div id="size-slider"></div>
										</div>
										<div class = "col-12 col-md-6">
											<div class = "row">
												<div class = "col-6">												
													<div class = "form-group">
														<label>Width:</label>
														<input class = "form-control" name = "i_width" id = "i_width" type = "number" value="16">
													</div>
												</div>
												<div class = "col-6">												
													<div class = "form-group">
														<div class = "form-group">
															<label>Height:</label>
															<input class = "form-control" name = "i_height" id = "i_height" type = "number"> 
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
									<hr>
									<div class = "row">
										<div class = "col-6">
											<span class = "size-title">FRAME:</span>
										</div>
										<div class = "col-6">
											<button class = "btn btn-outline btn-sm pull-right" onclick="removeFrame();"><i class = "pull-right fa fa-remove" > Remove Frame</i></button>
										</div>
									</div>
									<div id = "mouldings_include" class = "mt-3">
										{% include 'artevenue/mouldings_include_customize.html' %}
									</div>											
									<hr>
									<span id = "mount-show">
										<div class = "row mb-3">
											<div class = "col-6">
												<span class = "size-title">MOUNT</span> 
												<i style = "cursor: pointer;" onclick = "$('#framed-product-modal').modal('show');" class="fa fa-question-circle"></i>
											</div>
											<div class = "col-6">
												<button class = "btn btn-outline btn-sm pull-right" onclick = "removeMount();">
													<i class = "fa fa-remove" > Remove Mount</i>
												</button>
											</div>
										</div>
										<div class = "row">
											<div class = "col-3">
												<span class = "size-title">COLOR:</span>
											</div>
											<div class = "col-9">
											<div class = "row">
											{% for m in mounts %}
											<div class = "col-1 mr-3 mb-3">
												<button class = "btn mount" 
													id = "mnt_{{m.mount_id}}"
													style = "border:1px solid grey; background-color:{{m.color}};" 
													data-toggle="tooltip" 
													title = "{{m.name}}"  
													onclick = "set_mount_color('{{m.color}}'); mount_id_change('{{m.mount_id}}');">
												</button>
											</div>
											{% endfor %}
											</div>
											</div>
										</div>
										<div class = "row mb-3">
											<div class = "col-5">
												<span class = "size-title">WIDTH <small>(Inches)</small>:</span>
											</div>
											<div class = "col-4">
												<input class = "form-control" 
													type = "number"  
													onchange="mount_size_change(this.value, this.value, this.value, this.value, this.value);" 
													name = "mount-size" 
													id = "mount-size" 
													min = "1" max = "5" 
													value = "1" >
											</div>
										</div>
									</span>

									<div class = "row" id ="stretched">
										<div class = "col-12" style = "margin-top:-5px; font: 0.85rem 'Roboto', sans-serif;" class = "checkbox row">
											<label class="checkbox-inline">
												<input id="in_stretched" name="in_stretched"
													onchange = "stretch_changed();"
													type = "checkbox"> <strong>Stretched?</strong>
											</label>
										</div>
										<div class = "col-12" style = "margin-bottom:15px;">
											<small>Check the checkbox to get the canvas streched on a wooden frame</small>
											<span class = "">
												<i class = "fa fa-question-circle" 
													data-toggle="tooltip" title="Click to know more!"
													id="strt" 
													onclick="$('#stretched-modal').modal('show');">
													<span style = "color:#11b6bd; font-size:0.7rem; text-decoration:underline;">What does 'Stretched' mean</span>
												</i>
											</span>
										</div>
									</div>										
								</div>
							</div>
							<div class = "col-12 text-muted"
									style= "font-size: 0.65rem; text-align: left; padding:15px;">
								PRODUCT DETAILS<br /> 
								<span id = "prod-details">
								</span>
							</div>								
							<div class = "col-12 sticky d-flex justify-content-around">
								<div class = "" style = "color:#11b6bd; font-size:1.2rem; font-weight:600;">
									<i class="fa fa-inr" aria-hidden="true"></i><span id="prod-price-cart">{{collage.price|floatformat:"0"}}</span>
								</div>
								<div id = "selected_med"  class = "" style="font-size:0.65rem;">
									<span id="prod-desc">
										Print on paper, Simple Black frame 1.2 inch, offwhite 1 inch mount
									</span>
								</div>							
								<div class = "">
									<button class="btn btn-artevenue" 
										onclick="addProdToCart({{collage.product_id}}, 1)">
										<i class="fa fa-shopping-cart"></i>
										<strong>ADD TO CART</strong>
									</button>
								</div>
							</div>
							<div class = "row mt-3">
								<div id = "signupsave" class = "col-12 text-center">
									{% if not user.is_authenticated %}
									<button class = "btn btn-link"
										onclick = "$('#signup_popup-modal').modal('show');">
										Sign up in seconds and save 15% on order value
									</button>
									{% endif %}
								</div>
							</div>
						</div>
					</div>
					<div class = "row">
						<div class = "col-12 col-md-1">
						</div>
						<div class = "col-12 col-md-10">
							<div class = "mt-5 mb-5">
								ARTE'VENUE ADVANTAGE
								<div class="row">
									<div class = "col-12">
										<span style = "font-size:0.75rem;">(Click or tap each to know more)</span>
									</div>
								</div>
								<hr>
								<div class="row">
									<div class="col-4 mb-3 why-artevenue-div">
										<div onclick = "show_modal('GUARANTEE');">
											<img src="{% static 'img/why_artevenue/guarantee.png' %}"
												alt="100% Guranteed" class = "why_artevenue">
											<div class = "why-artevenue-head">
												Free Returns
											</div>
											<div class = "why-artevenue-text">
												Don't like it? Return it in 5 days and get the refund
											</div>
										</div>
									</div>
									<div class="col-4 mb-3 why-artevenue-div">
										<div onclick = "show_modal('FREE_SHIPPING');">
											<img src="{% static 'img/why_artevenue/truck.png' %}" 
											alt = "Free Shipping for all wall art painting" class = "why_artevenue">
											<div class = "why-artevenue-head">
												Free Shipping
											</div>
											<div class = "why-artevenue-text">
												Don't pay to bring it home, ships in 1-2 days
											</div>
										</div>
									</div>
									<div class="col-4 mb-3 why-artevenue-div" >
										<div onclick = "show_modal('CUSTOMIZATION');">
											<img src="{% static 'img/why_artevenue/customize.png' %}" 
											alt= "Customize the wall art" class = "why_artevenue">
											<div class = "why-artevenue-head">
												Customize it
											</div>
											<div class = "why-artevenue-text">
												Every artwork can be customized - surface, size, frame and more
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					
					<div class = "row">
						<div class = "col-12 col-md-1 img-thumbs">
						</div>
						<div class = "col-12 col-md-10">
							ABOUT THIS SET
							<hr>
							<span style = "color: darkgrey; font-size: 0.8rem;">
							This high quality art set is produced using the fine art
							printer, bringing out vivid colors, giving 
							you more realistic reproduction.
							Choice of quality frames that have classy finish. 	
							You won't go wrong with this carefully crafted art print.
							</span>
							<div id="accordion" class="accordion mt-5">
								<div class=" mb-0">
									<div class="card-header collapsed" data-toggle="collapse" href="#collapseOne">
										<a class="card-title">ART PRINT SET</a>
									</div>
									<div id="collapseOne" class="card-body collapse" data-parent="#accordion">
										<table class = "table table-borderless">
											<thead>
											</thead>
											<tbody>
												<tr>
													<td class="accordian-subhead">CATEGORY</td>
													<td class = "comp-frame">{{collage.stock_image_category.name}}</td>
												</tr>
												<tr>
													<td class="accordian-subhead">SET OF</td>
													<td class = "comp-frame">{{collage.set_of}} art prints</td>
												</tr>
												<tr>
													<td class="accordian-subhead">MAX PRINT WIDTH</td>
													<td class = "comp-frame">{{collage.max_width|floatformat}} inch
												</tr>
												<tr>
													<td class="accordian-subhead">MAX PRINT HEIGHT</td>
													<td class = "comp-frame">{{collage.max_height|floatformat}} inch
												</tr>
												<tr>
													<td class="accordian-subhead">ORIENTATION</td>
													<td class = "comp-frame">{{collage.orientation}}
												</tr>
											</tbody>
										</table>
									</div>
									<div class="card-header collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">
										<a class="card-title">SPECIFICATIONS</a>
									</div>
									<div id="collapseTwo" class="card-body collapse" data-parent="#accordion">
										<table class = "table table-borderless">
											<tbody>
												<tr>
													<td class="accordian-subhead">FRAME</td>
													<td class = "comp-frame">
														Made of Polystyrene, which is light weight, strong and durable. It has classy finish.
													</td>
												</tr>
												<tr>
													<td class="accordian-subhead">PAPER</td>
													<td class = "comp-frame">
														NovaJet Matte Coated Premium Paper 230 (MCP 230). Bright white, smooth finish matte, top-coated with an ink-receptive layer. Ideal for printing fine art reproduction.
													</td>
												</tr>
												<tr>													
													<td class="accordian-subhead">CANVAS</td>
													<td class = "comp-frame">
														NovaJet Artistic Matte Canvas 410 (AMC 410). Water-resistant canvas, top-coated with an ink-receptive layer. Ideal for printing fine art reproductions.
													</td>
												</tr>
												<tr>													
													<td class="accordian-subhead">GLASS</td>
													<td class = "comp-frame">
														Clear Acrylic: Added protection, durability and clear visibility. Please note that canvas art prints are not covered with glass or acrylic. 
													</td>
												</tr>
												<tr>													
													<td class="accordian-subhead">WITHOUT FRAME</td>
													<td class = "comp-frame">
														When you choose art print without frame, we roll and deliver it in a tube.
													</td>
												</tr>
												<tr>													
													<td class="accordian-subhead">STRETCHED CANVAS</td>
													<td class = "comp-frame">
														When you choose Canvas print without frame, you can have it stretched. The canvas is
														stretched on a wooden frame at the back. If not stretched, then we roll and deliver it in a tube.
													</td>
												</tr>
											</tbody>
										</table>
									</div>
									<div class="card-header collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseThree">
										<a class="card-title">FREE SHIPPING</a>
									</div>
									<div id="collapseThree" class="card-body collapse" data-parent="#accordion">
										<table class = "table table-borderless">
											<tbody>
												<tr>
													<td class="accordian-subhead"> LOCATIONS</td>
													<td class = "comp-frame">
														Fast and free shipping across India.
													</td>
												</tr>
												<tr>
													<td class="accordian-subhead">SHIPPING TIME</td>
													<td class = "comp-frame">
														Ships by FedEx in 1-2 business days. Usually deliveres in 3-7 days in most parts of India.
													</td>
												</tr>
											</tbody>
										</table>
									</div>
									<div class="card-header collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseFour">
										<a class="card-title"> SATISFACTION GUARANTEE</a>
									</div>
									<div id="collapseFour" class="card-body collapse" data-parent="#accordion">
										<table class = "table table-borderless">
											<tbody>
												<tr>
													<td class="accordian-subhead">QUALITY</td>
													<td class = "comp-frame">
														If the art set has any quality issue, is damaged during 
														delivery or you receive wrong artwork, we replace it with
														with no additional cost to you.
													</td>
												</tr>
												<tr>
													<td class="accordian-subhead"> RETURNS</td>
													<td class = "comp-frame">
														If you are not happy we accept return within 5 days and give you refund. No questions asked!
													</td>
												</tr>
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
						<div class = "col-12 col-md-1 img-thumbs">
						</div>
					</div>
					<div class = "row mt-2">
						<hr>
					</div>
					<div class = "row mt-2">
						<div class = "col-12 col-md-1 img-thumbs">
						</div>
						<div class = "col-12 col-md-10">
							{% customer_review collage.product_id cart_item.cart_item_id wishlist_item.wishlist_item_id iuser_width iuser_height %}
						</div>
						<div class = "col-12 col-md-1 img-thumbs">
						</div>
					</div>
				</div>
			</div>
			
			{% include 'artevenue/wall_color_tool.html' %}
			{% include 'artevenue/cart-add-message.html' %}
			{% include 'artevenue/wishlist-add-message.html' %}
			{% include 'artevenue/loader-message.html' %}
			{% include 'artevenue/message-modal_ok.html' %}
			{% include 'artevenue/signup_ask_modal.html' %}
			{% include 'artevenue/signup_modal.html' %}

			<div id="stretched-modal" tabindex="-1" role="dialog" aria-labelledby="What is Stretcher" aria-hidden="true" class="modal fade">
				<div class="modal-dialog modal-sm">
					<div class="modal-content">
						<div class="modal-header">
							<h3 class="modal-title">Stretched Canvas Print</h3>
							<button type="button" data-dismiss="modal" aria-label="Close" class="close"><span aria-hidden="true">×</span></button>
						</div>
						<div class="modal-body">
							<div class="">
								<img src = "{% static 'img/canvas_stretched.jpg' %}" 
									alt = "What is Stretched Canvas"
									style = "display:block; margin-left:auto; margin-right:auto; width:200px;">
								<ul class = "mt-3" style = "font-size:0.75rem;">
									<li>Please check the "Streched" checkbox to get the art 
										printed on canvas and streched on a wooden frame as 
									shown above. </li>
									<li>If not checked, we print art on canvas, roll it and 
									deliver it in a tube.</li>
								</ul>
							</div>
						</div>
					</div>
				</div>
			</div>


			<div id="framed-product-modal" tabindex="-1" role="dialog" aria-labelledby="Strecher" aria-hidden="true" class="modal fade">
				<div class="modal-dialog modal-sm">
					<div class="modal-content">
						<div class="modal-header">
							<h3 class="modal-title">Framed Product</h3>
							<button type="button" data-dismiss="modal" aria-label="Close" class="close"><span aria-hidden="true">×</span></button>
						</div>
						<div class="modal-body">
							<div class="">
								<img src = "{% static 'img/framed_product.png' %}" 
								alt = "Framed wall art painting"
								style = "display:block; margin-left:auto; margin-right:auto; width:200px;">
							</div>
						</div>
					</div>
				</div>
			</div>
			

		</div>
		
	{% endblock sitecontent %}
	
	
	{% block jscripts %}
	
	<script>
		var isBreakpoint = function(viewport_size){
		  //return $('.device-' + viewport_size).is(':visible');
		  if (viewport_size == 'xs'){
			return window.innerWidth < 768;
		  }
		  if (viewport_size == 'sm'){
			return window.innerWidth < 991;
		  }
		  if (viewport_size == 'md'){
			return window.innerWidth < 1199;
		  }
		  if (viewport_size == 'lg'){
			return window.innerWidth > 1199;
		  }
		}
	</script>
		
	<script>
		function startMagnify(){
			if (isBreakpoint('xs')==false) {
				magnify("prod-img", 3);
			}
		}
		
		function stopMagnify(){
			if (isBreakpoint('xs')==false) {
				removeGlass();
			}
		}

	</script>
	
	<script>
		// Global variables to store IDs of pricing components
		var product_id = '{{collage.product_id}}';
		var print_medium_id = 'PAPER';
		var image_width = 4;
		var image_height = 4;
		var moulding_id = '0';
		var mount_id = '0';
		var mount_color = '0';
		var mount_size = '1'; // Default is 1 inch
		var mount_w_left, mount_w_right, mount_w_top, mount_w_bottom = '0';
		var board_id = '{{boards.board_id}}';
		var acrylic_id = '{{acrylics.acrylic_id}}';
		var stretch_id = '1'; 

		var minsize = 4;
		var maxsize = 0;
		var ratio = 0;

		var fetch_img_on_slide = true;

		if ("{{collage.aspect_ratio}}" != "NA"){
			ratio = parseFloat("{{collage.aspect_ratio}}");
		}
		
		$( "#i_width" ).change(function() {
			currwidth = $(this).val();
			set_size_slider(currwidth);
		});
		$( "#i_height" ).change(function() {
			currheight = $(this).val();
			currwidth = Math.round(currheight * ratio);
			set_size_slider(currwidth);
		});

		$('#no-frame').change(function () {
			if ( $(this).is(':checked') ) {
				buy_without_frame_change(true);
			} else {			
				buy_without_frame_change(false);
			}
		});

		
		/*************************/
		/* Getter setter methods */
		/*************************/		
		// Product_id
		function set_product_id (prd_id) {
			product_id = prd_id;
		}
		
		function get_product_id () {
			return product_id
		}
		
		// print_medium_id
		function set_print_medium_id (prt_med) {
			print_medium_id = prt_med;
		}
		function get_print_medium_id () {
			return print_medium_id;
		}
		
		// Image width, height
		function set_image_width(wdt) {
			image_width = wdt;
		}
		function get_image_width () {
			return image_width;
		}
		function set_image_height(hgt) {
			image_height = hgt;
		}
		function get_image_height () {
			return image_height;
		}

		//moulding_id
		function set_moulding_id(m_id) {
			moulding_id = m_id;
		}
		function get_moulding_id() {
			return moulding_id;
		}

		//mount_id
		function set_mount_id(mnt_id) {
			mount_id = mnt_id;
		}
		function get_mount_id() {
			return mount_id;
		}

		//mount_color
		function set_mount_color(mnt_color) {
			mount_color = mnt_color;
		}
		function get_mount_color() {
			return mount_color;
		}
		
		//mount_size
		function set_mount_size(mnt_size) {
			mount_size = mnt_size;
		}
		function get_mount_size() {
			return mount_size;
		}
		
		//acrylic_id
		function set_acrylic_id(acr_id) {
			acrylic_id = acr_id;
		}
		function get_acrylic_id() {
			return acrylic_id;
		}

		//board_id
		function set_board_id(brd_id) {
			board_id = brd_id;
		}
		function get_board_id() {
			return board_id;
		}
		
		//stretch_id
		function set_stretch_id(strt_id) {
			stretch_id = strt_id;
		}
		function get_stretch_id() {
			return stretch_id;
		}		
		
		// Set print display size
		function print_size_display(wth, hgt){
			if (hgt < 4 || wth < 4){
				return;
			}
			$("#print-size-display").html(wth.toString() + '" X ' + hgt.toString() + '"');
			txt = 'EACH ITEM:- Print on : ' + print_medium_id + ', Print Size: ' + wth.toString() + ' X ' + hgt.toString();
			var f_size = 0;
			var mnt_size = 0;
			var frame_width = image_width;
			var frame_height = image_height;
			if (moulding_id != '0' && moulding_id != ''){
				{% for f in mouldings_show %}
					if ('{{f.moulding_id}}' == moulding_id) {			
						txt = txt + ', Frame: {{f.moulding__name}}';
						f_size = {{f.moulding__width_inner_inches}};
					}
				{% endfor %}
				
				frame_width = frame_width + f_size*2;
				frame_height = frame_height + f_size*2;
				
				if (print_medium_id == 'PAPER'){
					var mnt_color = '';
					if (mount_id != '0' && mount_id != '') {
						{% for m in mounts %}
							if ( '{{m.mount_id}}' == mount_id ) {
								mnt_color = '{{m.name|title}}';
							}
						{% endfor %}
					
						txt = txt + ", " + mount_size + ' inch ' + mnt_color + ' mount';
						mnt_size = parseFloat(mount_size);
						frame_width = frame_width + mnt_size*2;
						frame_height = frame_height + mnt_size*2;					
					}
				}
			} else  {
				if (get_stretch_id() == '1'){
					txt = txt + ", Stretched Canvas";
				}			
			}
			
			details_txt = txt + ', Finished Size:' + frame_width.toString() + '" X ' + frame_height.toString() + '" each';
			txt = 'Product Size(each item): ' + frame_width.toString() + '" X ' + frame_height.toString() + ' each"<br />Ships in 1-2 days';
			$('#prod-desc').html(txt);
			$('#prod-details').html(details_txt);
		}
		
		/******************/
		/* Events         */
		/******************/
		function print_medium_change(prt_med, fetch_img=true){
			set_print_medium_id(prt_med);
			var mld_id = get_moulding_id();
			var mnt_color = '';
			var mnt_size = '0';
			if (prt_med == 'PAPER') {
				mnt_color = get_mount_color();
				mnt_size = get_mount_size();
				$("#stretched").hide();
				set_stretch_id('0');
				$("#m-PAPER").addClass("p_clicked");
				$("#m-CANVAS").removeClass("p_clicked");
				$("#mount-show").show();
				{% for m in mounts %}
					$("#mnt_{{m.mount_id}}").show();
				{% endfor %}
				if (mld_id != '' && mld_id !== '0'){
					set_acrylic_id('1');
					set_board_id('1');
					set_mount_id('1');
				}
			} else if (prt_med == 'CANVAS') {
					mnt_color = '';
					mnt_size = '0';
					set_mount_id('0');
					$("#m-CANVAS").addClass("p_clicked");
					$("#m-PAPER").removeClass("p_clicked");
					$("#mount-show").hide();
					{% for m in mounts %}
						$("#mnt_{{m.mount_id}}").hide();
					{% endfor %}
					if (mld_id != '' && mld_id !== '0'){
						$("#in_stretched").prop("disabled", true);
						$("#in_stretched").prop("checked", true);
						set_stretch_id('1');
					} else {
						$("#in_stretched").prop("checked", false);
						$("#in_stretched").prop("disabled", false);
						set_stretch_id('1');
					}
					$("#stretched").show();
					if (document.getElementById('in_stretched').checked) {				
						set_stretch_id('{{stretches.stretch_id}}');
					} else {
						set_stretch_id('0');
					}
				} else {
						return;
			}
			
			print_size_display(image_width, image_height);

			if (fetch_img == true){
				calc_total_price();
				$.ajax({
						url: "{% url 'get_framed_collage' %}", 
						data: {'coll_id':get_product_id(), 'moulding_id': get_moulding_id(),
								'mount_color':mnt_color, 'mount_size':mnt_size, 'image_width':get_image_width()
							}, 
						dataType: 'text', 
						type: 'POST',
					success: function (data) {
						document.getElementById("prod-img").src = "data:image/png;base64," + data;
						document.getElementById("prod-img-card").src = "data:image/png;base64," + data;
						document.getElementById("card0").src = "data:image/png;base64," + data;
						get_cards();
					},
					error: function(xhr){
						alert("An error occured: " + xhr.status + " " + xhr.statusText); 
					}
				});
			}
		}
			

		function moulding_change(m_id, fetch_img = true){
			if (m_id == '' || m_id == '0'){
				return;
			}
			set_moulding_id(m_id);
			$('#no-frame').prop('checked', false);
			var mnt_color = '';
			var mnt_size = '0';
			
			// Add acrylic and board, or stretcher when a moulding is selected
			if (print_medium_id == 'PAPER') {
				mnt_color = get_mount_color();
				mnt_size = get_mount_size();
				set_acrylic_id("{{acrylics.acrylic_id}}");
				set_board_id('{{boards.board_id}}');
			} else if (print_medium_id == 'CANVAS'){
					// Set the stretch by default if moulding selected on Canvas
					mnt_color = '';
					mnt_size = '0';
					set_stretch_id("{{stretches.stretch_id}}"); 
					$("#in_stretched").prop("checked", true);
					$("#in_stretched").prop("disabled", true);
					set_stretch_id('1');
					$("#stretched").hide();
			}
			if (fetch_img == true){
				calc_total_price();
				getFramedImg (product_id, moulding_id, mnt_color, mnt_size);
				//Calculate the price
			}
			
			print_size_display(image_width, image_height);
		}
			
		
		function mount_id_change(mnt_id, fetch_img = true ) {
			if (mnt_id == '' || mnt_id == '0'){
				return;
			}
			set_mount_id(mnt_id);
			mnt_size = $("#mount-size").val();
			if (mnt_size >= '5' || mnt_size == '' || mnt_size == '0') {
				alert("Mount size should be between 1 and 5 inch");
				return;
			}
			set_mount_size(mnt_size);
			if (print_medium_id == 'PAPER') {
				if (fetch_img == true){				
					calc_total_price();
					getFramedImg (product_id, moulding_id, mount_color, mount_size);
				}
				print_size_display(image_width, image_height);
			}
		}
		
		function mount_size_change(mnt_size, fetch_img = true ){
			if (mnt_size == '' || mnt_size == '0'){
				return;
			}
			set_mount_size(mnt_size);
			if (mnt_size >= '5' || mnt_size == '' || mnt_size == '0') {
				alert("Mount size should be between 1 and 5 inch");
				return;
			}
			if (print_medium_id == 'PAPER') {
				print_size_display(image_width, image_height);
				if (fetch_img == true){
					calc_total_price();
					getFramedImg (product_id, moulding_id, mount_color, mount_size);
				}
			}				
		}
		function mount_size_change(mnt_size, mnt_w_left, mnt_w_right, mnt_w_top, mnt_w_bottom, fetch_img = true){
			if (mnt_size == '' || mnt_size == '0'){
				return;
			}
			mount_w_left = mnt_w_left;
			mount_w_right = mnt_w_right
			mount_w_top = mnt_w_top;
			mount_w_bottom = mnt_w_bottom;
			set_mount_size(mnt_size);
			if (print_medium_id == 'PAPER') {
				calc_total_price();
				print_size_display(image_width, image_height);
				if (fetch_img == true){				
					getFramedImg (product_id, moulding_id, mount_color, mount_size);
				}
			}				
		}

		function stretch_changed(){
			if ($("#in_stretched").prop('checked')){
				set_stretch_id('1');
			} else {
				set_stretch_id('0');
			}
			print_size_display(image_width, image_height);
			calc_total_price();
		}
		
		function buy_without_frame_change(yesno, fetch_img = true ){
			if (yesno == true){
				set_mount_id('0');
				set_mount_color('0');
				set_acrylic_id('1');
				set_board_id('1');
				set_moulding_id('0');
				set_mount_size('1');
				$('#no-frame').prop('checked', true);
				if (print_medium_id == 'CANVAS') {
					set_stretch_id('1');
					$("#in_stretched").prop("disabled", false);					
					$("#stretched").show();
				} else { 
					set_stretch_id('0');
					$("#stretched").hide();
				}
			} else {
				if (print_medium_id == 'PAPER') {
					set_mount_id('1');
					set_mount_color('#fffff0');
					var mnt_size = $("#mount-size").val();
					set_mount_size(mnt_size);
					set_acrylic_id('1');
					set_board_id('1');
				} else {
					set_mount_id('0');
					set_mount_color('');
					set_stretch_id('1');
					set_mount_size('1');					
				}
				$("#stretched").hide();
				set_moulding_id('18');
				$('#no-frame').prop('checked', false);
			}
			if (fetch_img == true){
				calc_total_price();
				getFramedImg (product_id, moulding_id, mount_color, mount_size);
			}
			print_size_display(image_width, image_height);
		}
		
		function removeFrame(fetch_img = true){
			set_moulding_id('0');
			set_mount_id('0');
			set_mount_color('');
			set_mount_size('0');
			if (print_medium_id == 'PAPER') {
				$("#in_stretched").prop("checked", false);
				$("#in_stretched").prop("disabled", true);			
				$("#stretched").hide();
			} else {
				$("#in_stretched").prop("checked", true);
				$("#in_stretched").prop("disabled", false);
				$("#stretched").show();
			}
			$('#no-frame').prop('checked', true);
			if (fetch_img == true){
				calc_total_price();
				getFramedImg (product_id, moulding_id, mount_color, mount_size);
			}
			print_size_display(image_width, image_height);
		}
		
		function removeMount(fetch_img = true){
			set_mount_id('0');
			set_mount_color('');
			set_mount_size('0');
			if (fetch_img == true){
				calc_total_price();
				getFramedImg (product_id, moulding_id, mount_color, mount_size);
			}
			print_size_display(image_width, image_height);
		}

	</script>

			
	<script>
		jQuery(document).ready(function(){

			$body = $("body");
			
			$(document).on({
				ajaxStart: function() { $body.addClass("loading");},
				ajaxStop: function() { $body.removeClass("loading");},
				ajaxStart: function() { $("#wall-color-tool").addClass("loading");},
				ajaxStop: function() { $("#wall-color-tool").removeClass("loading");}
			});
			

			{% if collage %}
				set_product_id("{{collage.product_id}}");
			{% endif %}	

			
			{% if not user.is_authenticated %}
				setTimeout(function() {
					$("#signup-ask-modal").modal('show');
					}, 10000);
			{% endif %}

			{% if cart_item or wishlist_item %}
				set_for_cart_wishlist_item();
			{% else %}
				{% if iuser_width %}
					if ({{iuser_width}} > 0) {
						set_size_slider({{iuser_width}});
						print_medium_change('PAPER', false);
						//$( "#size-slider" ).slider( "option", "value", {{iuser_width}});
						$("#paper-size-10").addClass("p_clicked");
						$("#canvas-size-10").addClass("p_clicked");
						set_ready_product('PAPER', {{iuser_width}}, {{iuser_width}}, false);
						buy_without_frame_change(false, false);
						
					} else {
						if ({{collage.max_width}} < 10 ){
							set_size_slider({{collage.max_width}});
							print_medium_change('PAPER', false);
							//$( "#size-slider" ).slider( "option", "value", {{collage.max_width}});
							$("#paper-size-10").addClass("p_clicked");
							$("#canvas-size-10").addClass("p_clicked");
							set_ready_product('PAPER', 10, 10, false);
							buy_without_frame_change(false, false);
						} else {
							set_size_slider(10);
							print_medium_change('PAPER', false);
							//$( "#size-slider" ).slider( "option", "value", 10);
							$("#paper-size-10").addClass("p_clicked");
							$("#canvas-size-10").addClass("p_clicked");
							set_ready_product('PAPER', 10, 10, false);
							buy_without_frame_change(false, false);
						}
					}
				{% else %}
					if ({{collage.max_width}} < 10 ){
						set_size_slider({{collage.max_width}});
						print_medium_change('PAPER', false);
						//$( "#size-slider" ).slider( "option", "value", {{collage.max_width}});
						$("#paper-size-10").addClass("p_clicked");
						$("#canvas-size-10").addClass("p_clicked");
						set_ready_product('PAPER', 10, 10, false);
						buy_without_frame_change(false, false);				
					} else {						
						set_size_slider(10);
						print_medium_change('PAPER', false);
						//$( "#size-slider" ).slider( "option", "value", 10);
						$("#paper-size-10").addClass("p_clicked");
						$("#canvas-size-10").addClass("p_clicked");
						set_ready_product('PAPER', 10, 10, false);
						buy_without_frame_change(false, false);
					}
				{% endif %}
			{% endif %}
		});

	</script>
	
	<script>
		function set_for_cart_wishlist_item(){
			{% if cart_item %}
				set_image_width({{cart_item.image_width}});
				set_image_height({{cart_item.image_height}});
				{% if cart_item.print_medium_id %}
					set_print_medium_id("{{cart_item.print_medium_id}}");
				{% endif %}
				{% if cart_item.moulding_id %}
					set_moulding_id("{{cart_item.moulding_id}}");
				{% endif %}
				{% if cart_item.mount_id %}
					set_mount_id("{{cart_item.mount_id}}");
					{% for m in mounts %}
						if ('{{m.mount_id}}' == '{{cart_item.mount_id}}'){
							set_mount_color("{{cart_item.mount.color}}");
						}
					{% endfor %}
				{% endif %}
				{% if cart_item.mount_size %}
					set_mount_size("{{cart_item.mount_size}}");
				{% endif %}
				{% if cart_item.acrylic_id %}
					set_acrylic_id("{{cart_item.acrylic_id}}");
				{% endif %}
				{% if cart_item.board_id %}
					set_board_id("{{cart_item.board_id}}");
				{% endif %}
				{% if cart_item.stretch_id %}
					set_stretch_id("{{cart_item.stretch_id}}");
				{% endif %}

				set_size_slider({{cart_item.image_width}});

				{% if cart_item.print_medium_id %}
					print_medium_change("{{cart_item.print_medium_id}}", false);
					{% if cart_item.print_medium_id == 'PAPER' %}
						$("#paper-size-{{cart_item.image_width}}").addClass("p_clicked");
					{% else %}				
						$("#canvas-size-{{cart_item.image_width}}").addClass("p_clicked");
					{% endif %}
				{% endif %}

				{% if cart_item.moulding_id %}
					moulding_change("{{cart_item.moulding_id}}", false);
				{% endif %}

				{% if cart_item.mount_id %}
					mount_id_change("{{cart_item.mount_id}}", false);
				{% endif %}

				{% if cart_item.mount_size %}
					mount_size_change("{{cart_item.mount_size}}", false);
				{% endif %}


			{% endif %}

			{% if wishlist_item %}
				set_image_width({{wishlist_item.image_width}});
				set_image_height({{wishlist_item.image_height}});
				{% if wishlist_item.print_medium_id %}
					set_print_medium_id("{{wishlist_item.print_medium_id}}", false);
				{% endif %}
				{% if wishlist_item.moulding_id %}
					set_moulding_id("{{wishlist_item.moulding_id}}");
				{% endif %}
				{% if wishlist_item.mount_id %}
					set_mount_id("{{wishlist_item.mount_id}}");
					{% for m in mounts %}
						if ('{{m.mount_id}}' == '{{wishlist_item.mount_id}}'){
							set_mount_color("{{wishlist_item.mount.color}}");
						}
					{% endfor %}
				{% endif %}
				{% if wishlist_item.mount_size %}
					set_mount_size("{{wishlist_item.mount_size}}");
				{% endif %}
				{% if wishlist_item.acrylic_id %}
					set_acrylic_id("{{wishlist_item.acrylic_id}}");
				{% endif %}
				{% if wishlist_item.board_id %}
					set_board_id("{{wishlist_item.board_id}}");
				{% endif %}
				{% if wishlist_item.stretch %}
					set_stretch_id("{{wishlist_item.stretch_id}}");
				{% endif %}
				set_size_slider({{wishlist_item.image_width}});
				//$( "#size-slider" ).slider( "option", "value", {{wishlist_item.image_width}});
				
				{% if wishlist_item.print_medium_id %}
					print_medium_change("{{wishlist_item.print_medium_id}}", false);
				{% endif %}
				
				{% if wishlist_item.moulding_id %}
					moulding_change("{{wishlist_item.moulding_id}}", false);
				{% endif %}

				{% if wishlist_item.mount_id %}
					mount_id_change("{{wishlist_item.mount_id}}", false);
				{% endif %}

				{% if wishlist_item.mount_size %}
					mount_size_change("{{wishlist_item.mount_size}}", false);
				{% endif %}

			{% endif %}
			calc_total_price();
		}
			
	</script>
	
	
	<script>
	
		function getFramedImg (prod_id, m_id, m_color, mount_size) {
			var currwidth = parseFloat($("#size-slider").slider("value"));
			var mnt_color = '';
			var mnt_size = '0'
			if (get_print_medium_id() == 'PAPER') {
				mnt_color = get_mount_color();
				mnt_size = get_mount_size()
			} else {
				mnt_color = '';
				mnt_size = '0'			
			}

			// Get the framed image
			$.ajax({
					url: "{% url 'get_framed_collage' %}", 
					data: {'coll_id':prod_id, 'moulding_id': moulding_id,
							'mount_color':mnt_color, 'mount_size':mnt_size, 'image_width':currwidth
						}, 
					dataType: 'text', 
					type: 'POST',
				success: function (data) {
					document.getElementById("prod-img").src = "data:image/png;base64," + data;
					document.getElementById("prod-img-card").src = "data:image/png;base64," + data;
					document.getElementById("card0").src = "data:image/png;base64," + data;
					get_cards();
					document.body.scrollTop = 0; // For Safari
					document.documentElement.scrollTop = 0;
					},
				error: function(xhr){
					alert("An error occured: " + xhr.status + " " + xhr.statusText); 
				}
			});
		}
	
	</script>
	
	<script>
		function set_size_slider(isize) {

			maxsize = parseFloat("{{collage.max_width}}");
			if (parseFloat("{{collage.max_width}}") > 40 && parseFloat("{{collage.max_height}}") > 40) {
				if (ratio > 1) {
					maxsize = Math.ceil( 40 * ratio );
				} else {
					maxsize = 40;
				}
			}
			if ( $( "size-slider" ).slider( "instance" ) != null ) { 
				if (isize == $( "#size-slider" ).slider( "value" ) ){
					return;
				}
			}
			$("#size-slider").slider({
				value:isize,
				min:minsize,
				max:maxsize,
				step:1,
				change:function(event, ui){
					var currwidth = ui.value;
					var currheight = Math.round(currwidth / ratio);
					//$("#size").html("Width: " + currwidth + ", Height: " + currheight);
					set_image_width(currwidth);
					set_image_height(currheight);
					$("#i_width").val(currwidth);
					$("#i_height").val(currheight);


					{% for key, value in ready_prod_data_paper.items %}
						if ({{value.PAPER_WIDTH_UNFRAMED}} == currwidth) {
							$('#paper-size-{{value.PAPER_WIDTH_UNFRAMED}}').addClass("p_clicked");
						} else {
							$('#paper-size-{{value.PAPER_WIDTH_UNFRAMED}}').removeClass("p_clicked");				
						}
					{% endfor %}
					
					{% for key, value in ready_prod_data_canvas.items %}
						if ({{value.CANVAS_WIDTH_UNFRAMED}} == currwidth) {
							$('#canvas-size-{{value.CANVAS_WIDTH_UNFRAMED}}').addClass("p_clicked");
						} else {
							$('#canvas-size-{{value.CANVAS_WIDTH_UNFRAMED}}').removeClass("p_clicked");	
						}
					{% endfor %}
					
					//set_selected_ready_prod_border(currwidth);
					
					print_size_display(currwidth, currheight);
					calc_total_price();
					if ( fetch_img_on_slide == false ) {
						fetch_img_on_slide = true;
					} else {
 						getFramedImg (product_id, moulding_id, mount_color, mount_size);
					}
				}
			});

			calc_total_price();
		}
	
	</script>
	

	<script>
	function calc_total_price(){
		//var ratio = parseFloat("{{collage.aspect_ratio}}"); 
		var currwidth = parseFloat($("#size-slider").slider("value"));
		var currheight = Math.round(currwidth / ratio);
		var sqin = currwidth * currheight;
		var rnin = (currwidth + currheight) * 2;
		var image_price = 0;
		var total_price = 0;
		var acr_id = get_acrylic_id();
		var brd_id = get_board_id();
		var mnt_id = get_mount_id();
		
		//Get Print Medium
		//var print_medium = $('#print-medium-select').val();
		var print_med = get_print_medium_id();
		
		// Set the pricing compoenents appropriately:
		if (print_med == 'PAPER') {
			if (moulding_id == '0' || moulding_id == '' || moulding_id == null){
				acr_id = '0';
				brd_id = '0';
				mnt_id = '0';
			}
			set_stretch_id('0');
		} else {
			if (document.getElementById('in_stretched').checked) {				
				set_stretch_id('{{stretches.stretch_id}}');
			} else {
				set_stretch_id('0');
			}
				
			acr_id = '0';
			brd_id = '0';
			mnt_id = '0';
		}
			
			
		// Form the pricing components
		json = '{ ' + 
				'"IMAGE": {"WIDTH":' + currwidth + ', "HEIGHT":' + currheight + '}, ' + 
				'"PRINT_MEDIUM": {"ID" :"' + print_med + '", "SIZE":' + sqin + '}, ' +
				'"ACRYLIC": {"ID" :' + acr_id + ', "SIZE":' + sqin + '}, ' +
				'"MOULDING": {"ID" :' + moulding_id + ', "SIZE":' + rnin + '}, ' +
				'"MOUNT": {"ID" :' + mnt_id + ', "SIZE":' + mount_size + '}, ' +
				'"BOARD": {"ID" :' + brd_id + ', "SIZE":' + sqin + '}, ' +
				'"STRETCH": {"ID" :' + stretch_id + ', "SIZE":' + rnin + '}, ' +
				'"PRODUCT": {"ID" :' + product_id + ', "SIZE":' + rnin + '}, ' +
				'"PRODUCT_TYPE": {"ID" :"STOCK-IMAGE", "SIZE":' + rnin + '} ' +
				'}';			
		
		
		// GET ITEM PRICE
		$.ajax({
				url: "{% url 'get_collage_price' %}", 
				data: json, 
				dataType: 'text', 
				type: 'POST',
				success: function (data) {
					data = JSON.parse(data);
					msg = data.msg.toUpperCase();
					if (data.msg.toUpperCase() == 'SUCCESS') { 
						if (data.disc_applied) {
							$("#no-disc").hide();
							$("#promo-display").show("slow");
							$("#item_unit_price").html(data.item_unit_price);
							$("#item_total_price").html(data.item_price);
							if ( parseInt(data.cash_disc) > 0 ) {
								$("#disc").html("(" + data.cash_disc + " off)");
							} else if( parseInt(data.percent_disc) > 0 ) {
								$("#disc").html("(" + data.percent_disc + "% off)");
							}
							
							$("#item_unit_price_nv").html(data.item_unit_price);
							$("#promotion_id_nv").html(data.promotion_id);
							$("#disc_amt_nv").html(data.disc_amt);
							$("#item_total_price_nv").html(data.item_price);
							$("#prod-price-cart").html(data.item_price);
							
						} else {
							$("#promo-display").hide();
							$("#no-disc").show();
							$("#prod-price").html(data.item_price);
							$("#prod-price-cart").html(data.item_price);

							$("#item_unit_price_nv").html(data.item_unit_price);
							$("#item_total_price_nv").html(data.item_price);
							$("#promotion_id_nv").html('');
							$("#disc_amt_nv").html('');
						}
					} else {
						alert(msg);
							$("#promo-display").hide();
							$("#no-disc").show();
							
							$("#item_unit_price_nv").html(data.item_unit_price);
							$("#item_total_price_nv").html(data.item_price);
							$("#promotion_id_nv").html('');
							$("#disc_amt_nv").html('');
					}
				},
				error: function(xhr){
					//alert("An error occured: " + xhr.status + " " + xhr.statusText); 
				}
		});		
	}		
	</script>
	
	
	<script>
		function addProdToCart(prod_id, qty) {
			var cart_qty;
			var total_price = $("#item_total_price_nv").html();	
			if (total_price == '0'){
				alert("Sorry, this product is not available.");
				return;
			}			
			var discount = $("#disc").html();
			var promotion_id = $("#promotion_id_nv").html();
			var disc_amt = $("#disc_amt_nv").html();
			var item_unit_price = $("#item_unit_price_nv").html();

			var m_size = parseInt($('#mount-size').val());
			if(typeof m_size == "undefined"){			
				alert("Sorry, mount width can be between 1 and 5 inch.");
				return;
			}
			if ( m_size > 5 ){
				alert("Sorry, mount width can be between 1 and 5 inch.");
				return;
			}
			
			//var ratio = parseFloat("{{collage.aspect_ratio}}"); 
			var currwidth = parseFloat($("#size-slider").slider("value"));
			var currheight = Math.round(currwidth / ratio);
			var sqin = currwidth * currheight;
			
			//print_medium_id = $('#print-medium-select').val();
			print_medium_id = get_print_medium_id();
			print_medium_size = sqin;
			moulding_size = (currwidth + currheight) * 2;
			//mount_size = (currwidth + currheight) * 2;  // Taken from the mout_size set earlier (not sqin)
			acrylic_size = currwidth * currheight;
			board_size = currwidth * currheight;
			stretch_size = (currwidth + currheight) * 2;
			
			var acr_id = '';
			var brd_id = '';
			var str_id = '';
			if (print_medium_id == 'CANVAS') {
				var str_id = get_stretch_id();
				mnt_id = '0'
			} else {
				if (moulding_id != '' && moulding_id != '0') {
					var acr_id = get_acrylic_id();
					var brd_id = get_board_id();
					var mnt_id = get_mount_id;
				} else {
					var acr_id = '';
					var brd_id = '';
				}
				var str_id = '';
			}
			
			//
			var cart_item_flag = 'FALSE';
			{% if cart_item %}
				cart_item_flag = 'TRUE';
			{% endif %}

			mount_w_left, mount_w_right, mount_w_top, mount_w_bottom = '0';
			
			// Update the cart
			$.ajax({
				url: "{% url 'add_to_cart' %}", 
				data: {'prod_id':prod_id, 'qty':qty, 'moulding_id': moulding_id,
						'width':currwidth, 'height':currheight,
						'moulding_size' : moulding_size,
						'print_medium_id':print_medium_id, 'print_medium_size':print_medium_size, 
						'mount_id':mnt_id, 'mount_size':mount_size,
						'mount_w_left' : mount_w_left, 'mount_w_right':mount_w_right, 
						'mount_w_top':mount_w_top, 'mount_w_bottom' : mount_w_bottom, 
						'acrylic_id':acr_id, 'acrylic_size':acrylic_size,
						'board_id':brd_id, 'board_size':board_size, 'stretch_id':str_id,
						'stretch_size':stretch_size, 
						'total_price':total_price, 'image_width':currwidth, 'image_height':currheight,
						'discount':discount, 'promotion_id':promotion_id, 'disc_amt':disc_amt,
						'item_unit_price':item_unit_price, 'prod_type':'STOCK-COLLAGE',
						'cart_item_flag':cart_item_flag, 'image': document.getElementById("prod-img").src }, 
				dataType: 'text', 
					type: 'POST',
				success: function (data) {
					data = JSON.parse(data);
					if (data.msg.toUpperCase() != 'SUCCESS'){
							alert(data.msg);
					} else {					
							
						cart_qty = data.cart_qty;
						//Update items in cart
						$("#itemsincart").html(cart_qty); 
						$('#cart-msg-modal').modal('show');
					}
				},
				error: function(xhr){
					alert("An error occured: " + xhr.status + " " + xhr.statusText); 
				}
			});
		}
		
	
		// ---- Add Product to Cart ----//
		function addProdToWishlist(prod_id, qty) {
			var cart_qty;
			var total_price = $("#item_total_price_nv").html();
			if (total_price == '0'){
				alert("Sorry, this product is not available.");
				return;
			}
			var discount = $("#disc").html();
			var promotion_id = $("#promotion_id_nv").html();
			var disc_amt = $("#disc_amt_nv").html();
			var item_unit_price = $("#item_unit_price_nv").html();
	
			var img = document.getElementById('prod-img');
			var width = img.naturalWidth;
			var height = img.naturalHeight;
			var ratio = width/height;		
			var img = document.getElementById('prod-img');
			var currwidth = parseFloat($("#size-slider").slider("value"));
			var currheight = Math.round(currwidth / ratio);
			var sqin = currwidth * currheight;
			
			//print_medium_id = $('#print-medium-select').val();
			print_medium_size = sqin;
			moulding_size = (currwidth + currheight) * 2;
			acrylic_size = currwidth * currheight;
			board_size = currwidth * currheight;
			stretch_size = (currwidth + currheight) * 2;
			
			if (print_medium_id == 'CANVAS') {
				var acr_id = '';
				var brd_id = '';
				var str_id = get_stretch_id();
			} else {
				var acr_id = get_acrylic_id();
				var brd_id = get_board_id();
				var str_id = '';
			}

			//
			var wishlist_item_flag = 'FALSE';
			{% if wishlist_item %}
				wishlist_item_flag = 'TRUE';
			{% endif %}
			
			// Update the cart
			$.ajax({
				url: "{% url 'add_to_wishlist' %}", 
				data: { 'prod_id':prod_id,'qty':qty, 
						'width':currwidth, 'height':currheight, 'moulding_id': moulding_id,
						'moulding_size' : moulding_size,
						'print_medium_id':print_medium_id, 'print_medium_size':print_medium_size, 
						'mount_id':mount_id, 'mount_size':mount_size,
						'mount_w_left' : mount_w_left, 'mount_w_right':mount_w_right, 
						'mount_w_top':mount_w_top, 'mount_w_bottom' : mount_w_bottom, 
						'acrylic_id':acr_id, 'acrylic_size':acrylic_size,
						'board_id':brd_id, 'board_size':board_size, 'stretch_id':str_id,
						'stretch_size':stretch_size, 
						'total_price':total_price, 'image_width':currwidth, 'image_height':currheight,
						'discount':discount, 'promotion_id':promotion_id, 'disc_amt':disc_amt,
						'item_unit_price':item_unit_price,  'prod_type':'STOCK-COLLAGE',
						'wishlist_item_flag':wishlist_item_flag}, 
				dataType: 'text', 
					type: 'POST',
				success: function (data) {
					data = JSON.parse(data);
					cart_qty = data.cart_qty;
					//Update items in cart
					$('#msg-wishlist-modal').modal('show');
				},
				error: function(xhr){
					alert("An error occured: " + xhr.status + " " + xhr.statusText); 
				}
			});

		}				
	
	</script>
	
	<script>
		function addToFav(prod_id, currwidth, aspect_ratio, total_price,
				discount, promotion_id, disc_amt, item_unit_price){
			currheight = Math.round(currwidth / aspect_ratio);
			var qty = 1; var mld_id = 0; var moulding_size = 0; 
			var print_med = 'PAPER'; var print_medium_size = currheight * currwidth;
			var mnt_id = 0; var mnt_size = 0; var mnt_w_left =0; var mnt_w_right = 0;
			var mnt_w_top =0; var mnt_w_bottom = 0; var acr_id = 1;
			var acrylic_size = currheight * currwidth; var brd_id = 0; var board_size = 0;
			var strch_id = 0; var stretch_size = 0; var discount = 0;
		
			$.ajax({
				url: "{% url 'add_to_wishlist' %}", 
				data: { 'prod_id':prod_id,'qty':qty, 
						'width':currwidth, 'height':currheight, 'moulding_id': mld_id,
						'moulding_size' : moulding_size,
						'print_medium_id':print_med, 'print_medium_size':print_medium_size, 
						'mount_id':mnt_id, 'mount_size':mnt_size,
						'mount_w_left' : mnt_w_left, 'mount_w_right':mnt_w_right, 
						'mount_w_top':mnt_w_top, 'mount_w_bottom' : mnt_w_bottom, 
						'acrylic_id':acr_id, 'acrylic_size':acrylic_size,
						'board_id':brd_id, 'board_size':board_size, 'stretch_id':strch_id,
						'stretch_size':stretch_size, 
						'total_price':total_price, 'image_width':currwidth, 'image_height':currheight,
						'discount':discount, 'promotion_id':promotion_id, 'disc_amt':disc_amt,
						'item_unit_price':item_unit_price,  'prod_type':'STOCK-COLLAGE'}, 
				dataType: 'text', 
					type: 'POST',
				success: function (data) {
					data = JSON.parse(data);
					cart_qty = data.cart_qty;
					$('#fav_'+prod_id).html('<i class = "fa fa-heart" onclick = "deleteItem(' + prod_id + ')"style="color:red; padding-right:5px;" data-toggle="tooltip" title="Added to Favorites!"></i>');
					/* $('#msg-wishlist-modal').modal('show');
					setTimeout(function() {
						$('#msg-wishlist-modal').modal('hide');
						}, 1000);
					*/
				},
				error: function(xhr){
					alert("An error occured: " + xhr.status + " " + xhr.statusText); 
				}
			});	
		}
	</script>


	<script>
		function show_streched_img(){
			$("#show_streched_img").modal('show');	
		}
	</script>
	
	
	<script>
		function getFramedImgForReadyProd(prod_id, prod_width, p_medium) {

			// Get the framed image
			$.ajax({
					url: "{% url 'get_ready_products' %}", 
					data: {'prod_id':prod_id, 'prod_width':prod_width, 'print_medium':p_medium}, 
					dataType: 'text', 
					type: 'POST', 
				success: function (data) {
					if (p_medium == 'PAPER') {
						document.getElementById("prod-width-" + prod_width + '-paper').src = "data:image/png;base64," + data;
					} else {
						document.getElementById("prod-width-" + prod_width + '-canvas').src = "data:image/png;base64," + data;
					}
				},
				error: function(xhr){
					alert("An error occured: " + xhr.status + " " + xhr.statusText); 
				}
			});
		}
	</script>
	
	<script>
		function set_ready_product(print_med, p_width, unframed_width, fetch_img=true){

			var prod_id = get_product_id();
			
			if (print_med == 'PAPER') {
				set_mount_id('1');
				if (unframed_width <= 24) {
					set_mount_size('1');
					set_moulding_id('18');
				} else if (unframed_width <= 42) {
					set_mount_size('2');
					set_moulding_id('24');
				} else {
					set_mount_size('3');
					set_moulding_id('24');
				}
				set_mount_color('#fffff0');
				set_board_id('1');
				set_acrylic_id('1');
				set_stretch_id('0');
			} else {
				set_mount_id('0');
				set_mount_size('1');
				set_mount_color('');
				set_board_id('0');
				set_acrylic_id('0');
				if (unframed_width <= 24) {
					set_moulding_id('18');
				} else if (unframed_width <= 42) {
					set_moulding_id('24');
				} else {
					set_moulding_id('24');
				}
				set_stretch_id('1');
			}
			if  ( fetch_img == false ){
				fetch_img_on_slide = true;
			}
			set_size_slider(unframed_width);
			$('#no-frame').prop('checked', false);
			
			var p_id = "paper-size-"+ p_width.toString();
			var c_id = "canvas-size-"+ p_width.toString();
			
			
			{% for key, value in ready_prod_data_paper.items %}
				if ("paper-size-{{value.PAPER_WIDTH}}" == p_id) {
					$('#paper-size-{{value.PAPER_WIDTH}}').addClass("p_clicked");
				} else {
					$('#paper-size-{{value.PAPER_WIDTH}}').removeClass("p_clicked");				
				}
			{% endfor %}
			
			//set_selected_ready_prod_border(p_width);
			//set_selected_ready_prod_border(p_width);
		}
		
	</script>
	
	<script>
		function set_selected_ready_prod_border(p_width) {
			
			var p_id = "paper-"+ p_width.toString();
			var c_id = "canvas-"+ p_width.toString();
			
			{% for key, value in ready_prod_data_paper.items %}
				if ("paper-{{value.PAPER_WIDTH_UNFRAMED}}" == p_id) {
					$('#paper-{{value.PAPER_WIDTH_UNFRAMED}}').css({ border: "1px solid #11b6bd"});
				} else {
					$('#paper-{{value.PAPER_WIDTH_UNFRAMED}}').css({ border: "none"});
				}
			{% endfor %}
			
			{% for key, value in ready_prod_data_canvas.items %}
				if ("canvas-{{value.CANVAS_WIDTH_UNFRAMED}}" == c_id) {
					$('#canvas-{{value.CANVAS_WIDTH_UNFRAMED}}').css({ border: "1px solid #11b6bd"});
				} else {
					$('#canvas-{{value.CANVAS_WIDTH_UNFRAMED}}').css({ border: "none"});
				}
			{% endfor %}		
		}
	</script>
	
	
	<script>
		function show_modal(param){
			switch(param) {
		  case 'FREE_SHIPPING':
			$("#modal-hedline").html('FREE DELIVERY ANYWHERE IN INDIA');
			$("#msg").html('<p>We produce the artwork and ship it within 1-2 days on receipt of an order.</p><p> Ususally courier delivers to most parts of India in 3-7 days.</p>');
			break;
		  case 'CUSTOMIZATION':
			$("#modal-hedline").html('CUSTOMIZE THE ARTWORK AS YOU LIKE');
			$("#msg").html("<p><strong>A FIRST IN INDIA:</strong> Customize every artwork the way you would like it. You are not bound by those 'standard sizes' & frames, create it exactly as your space needs.</p> <p>Click on the 'CUSTOMIZE' tab and you can choose print size from minimum 4 inch wide to maximum allowed by the artist. Choose the frame and also choose the mount color, size.</p> <p>Before you finalize, see how it looks.</p>");
			break;
		  case 'GUARANTEE':
			$("#modal-hedline").html('YOUR SATISFACTION IS GUARANTEED');	  
			$("#msg").html("<p><strong>RETURNS</strong>: If you are not satisfied, we accept the returns, no questions asked. We make arrangements to get artwork returned to us and give you the refund.</p> <p><strong>REPLACEMENT:</strong> If you receive the artwork with damages, or having quality issues, we will replace it without any additional cost to you.</p><p><small>You may go through our returns, refund policy in footer of this webpage.</small></p>");
			break;
		  case 'LICENSED':
			$("#modal-hedline").html('LICENSED ARTWORKS');			  
			$("#msg").html("<p><strong>All our artworkss are licensed from  artists.</strong></p> <p>We don't use unauthorized or fake images.</p> <p>No copyright issues and you can enjoy the art to the fullest.</p>");
			break;
		  case 'SECURED':
			$("#modal-hedline").html('SECURED CHECKOUT PROCESS');
			$("#msg").html("The checkout process and payments are completely secured. We will not save your payment details. You will receive all the details on your order and payment.");
			break;				
		  case 'QUALITY':
			$("#modal-hedline").html('HIGH QUALITY AT AFFORDABLE PRICES');
			$("#msg").html("<p><strong>QUALITY:</strong> You won't be disapponted. We use professional printer, high quality frames with classy finish and materials used for fine art reproductions. We craft each artwork carefully and with state-of-the-art machines.</p> <p><strong>PRICE:</strong> Our prices are highly competitive for the quality we provide. If you don't like the price you paid, we accept returns without any questions.</p>");
			break;				
		  case 'LARGEST':
			$("#modal-hedline").html('LARGEST COLLECTION');
			$("#msg").html("<p><strong>DID YOU KNOW THAT WE HAVE THE LARGEST COLLECTION OF LICENSED ARTWORKS IN INDIA?</strong></p> <p>Over 2.7 lakh artworks licensed from over 4500 artists across the world.</p> <p>Arte'Venue saves you the pain of looking around for that exact piece of art you want for your wall.");
			break;
			}
			$('#msg-modal').modal('show');
		}
		
	</script>
	
	<script>
	function get_cards(){
		// Get the card
		var prod_id = get_product_id();
		var currwidth = parseFloat($("#size-slider").slider("value"));
		var m_id = get_moulding_id();
		var mnt_color = '';
		var mnt_size = '0'
		if (get_print_medium_id() == 'PAPER') {
			mnt_color = get_mount_color();
			mnt_size = get_mount_size()
		} else {
			mnt_color = '';
			mnt_size = '0'			
		}
		$.ajax({
				url: "{% url 'get_collage_catalog_card' %}", 
				data: {'card_no': '1', 'prod_id':prod_id, 'moulding_id': m_id,
						'mount_color':mnt_color, 'mount_size':mnt_size, 
						'image_width':currwidth, 'prod_type':'STOCK-COLLAGE'
					}, 
				dataType: 'text', 
			success: function (data) {
				document.getElementById("card1").src = "data:image/png;base64," + data;
				document.getElementById("prod-card1").src = "data:image/png;base64," + data;				
				},
			error: function(xhr){
				alert("An error occured: " + xhr.status + " " + xhr.statusText); 
			}
		});

		$.ajax({
				url: "{% url 'get_collage_catalog_card' %}", 
				data: {'card_no': '2', 'prod_id':prod_id, 'moulding_id': m_id,
						'mount_color':mnt_color, 'mount_size':mnt_size, 
						'image_width':currwidth, 'prod_type':'STOCK-COLLAGE'
						}, 
				dataType: 'text', 
			success: function (data) {
				document.getElementById("card2").src = "data:image/png;base64," + data;
				document.getElementById("prod-card2").src = "data:image/png;base64," + data;				
				},
			error: function(xhr){
				alert("An error occured: " + xhr.status + " " + xhr.statusText); 
			}
		});
		$.ajax({
				url: "{% url 'get_collage_catalog_card' %}", 
				data: {'card_no': '3', 'prod_id':prod_id, 'moulding_id': m_id,
						'mount_color':mnt_color, 'mount_size':mnt_size, 
						'image_width':currwidth, 'prod_type':'STOCK-COLLAGE'
					}, 
				dataType: 'text', 
			success: function (data) {
				document.getElementById("card3").src = "data:image/png;base64," + data;
				document.getElementById("prod-card3").src = "data:image/png;base64," + data;				
				},
			error: function(xhr){
				alert("An error occured: " + xhr.status + " " + xhr.statusText); 
			}
		});
		$.ajax({
				url: "{% url 'get_collage_catalog_card' %}", 
				data: {'card_no': '4', 'prod_id':prod_id, 'moulding_id': m_id,
						'mount_color':mnt_color, 'mount_size':mnt_size, 
						'image_width':currwidth, 'prod_type':'STOCK-COLLAGE'
					}, 
				dataType: 'text', 
			success: function (data) {
				document.getElementById("card4").src = "data:image/png;base64," + data;
				document.getElementById("prod-card4").src = "data:image/png;base64," + data;				
				},
			error: function(xhr){
				alert("An error occured: " + xhr.status + " " + xhr.statusText); 
			}
		});
		$.ajax({
				url: "{% url 'get_collage_catalog_card' %}", 
				data: {'card_no': '5', 'prod_id':prod_id, 'moulding_id': m_id,
						'mount_color':mnt_color, 'mount_size':mnt_size, 
						'image_width':currwidth, 'prod_type':'STOCK-COLLAGE',
						'user_width': currwidth
					}, 
				dataType: 'text', 
			success: function (data) {
				document.getElementById("card5").src = "data:image/png;base64," + data;
				document.getElementById("prod-card5").src = "data:image/png;base64," + data;				
				},
			error: function(xhr){
				alert("An error occured: " + xhr.status + " " + xhr.statusText); 
			}
		});
	}
	</script>
	<script>
	$( "#card0" ).on( "click", function() {
		var src = document.getElementById("card0").src;
		document.getElementById("prod-img").src = src;
	});
	$( "#card1" ).on( "click", function() {
		var src = document.getElementById("card1").src;
		document.getElementById("prod-img").src = src;
	});
	$( "#card2" ).on( "click", function() {
		var src = document.getElementById("card2").src;
		document.getElementById("prod-img").src = src;
	});
	$( "#card3" ).on( "click", function() {
		var src = document.getElementById("card3").src;
		document.getElementById("prod-img").src = src;
	});
	$( "#card4" ).on( "click", function() {
		var src = document.getElementById("card4").src;
		document.getElementById("prod-img").src = src;
	});
	
	$( "#card5" ).on( "click", function() {
		var src = document.getElementById("card5").src;
		document.getElementById("prod-img").src = src;
	});
	
	</script>

	<script>
	function show_size_color_tool(){
		var frame_width = image_width;
		var frame_height = image_height;
		if (moulding_id != '0' && moulding_id != ''){
			{% for f in mouldings_show %}
				if ('{{f.moulding_id}}' == moulding_id) {			
					f_size = {{f.moulding__width_inner_inches}};
				}
			{% endfor %}
			
			frame_width = frame_width + f_size*2;
			frame_height = frame_height + f_size*2;
			
			if (print_medium_id == 'PAPER'){
				var mnt_color = '';
				if (mount_id != '0' && mount_id != '') {
					mnt_size = parseFloat(mount_size);
					frame_width = frame_width + mnt_size*2;
					frame_height = frame_height + mnt_size*2;					
				}
			}
		}
		$('#a_width').val(frame_width);
		$('#a_height').val(frame_height);
		$('#wall-color-tool').modal('show');
		show_wall_tool(document.getElementById('prod-img-card').src, '{{wall_colors.0}}', 'TRUE');
	}
	</script>

	{% endblock jscripts %}	

	{% block tawkto %}
	{% endblock tawkto %}
