{% extends 'artevenue/estore_base.html' %}
{% load static %}
{% load utils %}
{% load customer_review from customer_review %}
{% load how_to_tips from estore_base %}

{% block page-title %} 
	<title>
		Wall Art - Name {{product.name}}, by {{product.artist}}. Art Print ID: {{product.id}} | Buy ready size or customize it. 
	</title>
{% endblock page-title %} 

{% block page-description %}
<meta name="description" content="Art Print ID {{product.id}}. Buy top quality art print. Buy ready size or customize it exactly as you like.">
{% endblock page-description %}
  
{% block page-keywords %}
<meta name="keywords" content="Art print, canvas print, paper print, {{product.artist}},{{product.name}} ">
{% endblock page-keywords %}
  
{% block page-author %}
<meta name="author" content="Arte'venue">
{% endblock page-author %}


{% block jqueryui-stylesheet %}
<link rel="stylesheet" href="{% static 'vendor/jquery-ui-1.12.1/jquery-ui.min.css' %}">
{% endblock jqueryui-stylesheet %}

{% block jqueryui-script %}
<script src="{% static '/vendor/jquery-ui-1.12.1/jquery-ui.min.js' %}"></script>
{% endblock jqueryui-script %}

{% block popper-script %}
	<script src="{% static 'vendor/popper.js/umd/popper.min.js' %}"> </script>
{% endblock popper-script %}

{% block imagemap-resize-script %}
{% endblock imagemap-resize-script %}

{% block add_to_head %}
	{% if product.product_id != '148993' and product.product_id != '220224' and product.product_id != '23309' and product.product_id != '33249' and product.product_id != '155726' and product.product_id != '164403' and  product.product_id != '198778' %}
	<meta name="robots" content="noindex">
	{% endif %}	
{% endblock %}


{% block lazysizes %}
<script src="{% static '/vendor/lazysizes/lazysizes.min.js' %}" async=""></script>
{% endblock lazysizes %}

{% block JSON-LD %}
	<script type="application/ld+json">
    {
      "@context": "https://schema.org/",
      "@type": "Product",
      "name": "{{ product.name }}",
      "image": [
        "{% static product.url %}"
       ],
      "description": "{{ product.decription }}: Choose from ready sizes or customize it.",
      "sku": "{{ product.product_id }}",
      "mpn": "",
      "brand": {
        "@type": "Brand",
        "name": "Arte'Venue"
      },
      
      "offers": {
        "@type": "Offer",
        "url": "https://www.artevenue.com/offers",
        "priceCurrency": "INR",
        "price": "500",
        "priceValidUntil": "2022-12-31",
        "itemCondition": "NewCondition",
        "availability": "InStock",
        "seller": {
          "@type": "Organization",
          "name": "Montage Art Pvt Ltd"
        }
      }
    }
	</script>
	
	<script type="application/ld+json">
	{
	  "@context": "http://schema.org",
	  "@type": "Painting",
	  "name": "{{product.name}}",
	  "genre": "{{product_category.stock_image_category.name}}"
	}
    </script>
{% endblock JSON-LD %}

{% load moulding_url %}
{% load update_cart_message from estore_base %}
	<!-- Only Override the site content block -->
	{% block sitecontent %}
        <div id="" class = "container-fluid">
			<div class="row">
				<div class="col-12">
					<!-- breadcrumb-->
					<nav aria-label="breadcrumb">
						<ol class="breadcrumb">
							<li class="breadcrumb-item"><a href="{% url 'index' %}">Home</a></li>
							<li class="breadcrumb-item"><a href="{% url 'show_all_categories' %}">Categories</a></li>
							<li class="breadcrumb-item">
								{% if product_category.stock_image_category.url_suffix %}
								<a href="{% url 'art_by_category' cat_nm=product_category.stock_image_category.url_suffix %}">{{product_category.stock_image_category.name|title}}
								</a>
								{% else %}
								<a href="{% url 'art_by_category' cat_nm=product_category.stock_image_category.name %}">{{ product_category.stock_image_category.name |title}}
								</a>
								{% endif %}							
							</li>
							<li class="breadcrumb-item active">{{ product.product_id }}</li>
						</ol>
					</nav>
				</div>
				<div class="col-12" style = "padding:30px;">
					<button onclick="topFunction();" id="scrollBtn" title="Go to top">
						<i class = "fa fa-chevron-up fa-lg"></i>
					</button>				
					<span class="id" hidden>{{product.product_id}}</span>
					<div id="productMain" class="row">
						<div class = "d-none d-md-block col-12 col-md-2 img-thumbs" id="desktop-thumb">
								<div class = "col-2">
									<img alt ="Wall Art: {{product.name}} | 3D view" class = "card-thumb" id = "card0" 
										style = "max-height: 80px;">
								</div>
								<div class = "col-2">
									<img alt ="Wall Art: {{product.name}} | Front view" class = "card-thumb" id = "card1" 
										 style = "max-height: 80px;">
								</div>
								<div class = "col-2">
									<img src = '' alt ="Wall Art: {{product.name}} | On the wall" class = "card-thumb" id = "card2" 
										 style = "max-height: 80px;">
								</div>
								<!--	
								<div class = "col-2">
									<img src = '' alt ="more features" class = "card-thumb" id = "card5" width=62 >
								</div>
								-->
						</div>
						<div class = "d-none d-md-block col-12 col-md-5 img-div">
							<div class = "show_on_large_only mt-5">
								&nbsp;
							</div>
							{% if product.publisher == '1001' %}
								<div class="item img-magnifier-container" 
										onmouseenter="startMagnify()" 
										onmouseleave="stopMagnify()"
										ontouchstart="startMagnify()" 
										ontouchend="stopMagnify()"
										id = "image-div"> 
									<img id = "prod-img" src="{% static product.url %}" 
										alt = "Wall Art Painting id:{{product.product_id}}, Name: {{product.name}}, Artist: {{product.artist}}" 
										style = "max-width: 100%; max-height:400px; min-height:300px; margin:0px;"/>
								</div>
							
							{% else %}
								<div class="item img-magnifier-container" 
										onmouseenter="startMagnify()" 
										onmouseleave="stopMagnify()"
										ontouchstart="startMagnify()" 
										ontouchend="stopMagnify()"
										id = "image-div"
										style = "height: 400px;">
									<img id = "prod-img" src="{% static product.url %}" alt="Art Print: {{product.name}}"  data-action = "zoom" class="img-fluid"
											style = "max-width: 100%; max-height:400px; min-height:300px; margin:0px;" 
											alt = "Wall Art Painting id:{{product.product_id}}, Name: {{product.name}}, Artist: {{product.artist}}" />
								</div>
							{% endif %}
							<div class = "col-12">
								<!--<img src = "{% static '/img/licensed_artprint.jpg' %}" alt="Licensed Art Print"
								height = 23>-->
								<button data-target='tooltip' title = "Add to favourites" 
										class="btn btn-sm pull-right" style = "background-color:#fff; border: 1px solid #cfcfcf; border-radius: 50%; padding:3px;"
										onclick="addProdToWishlist({{product.product_id}},1)">
									<i class="fa fa-heart-o fa-lg" ></i>
								</button>								
								{% if img_download_flg %}
								<div class = "row">
									<img src = "{% static 'img/download_btn.png' %}" width=80 alt="download image"
										onclick = "donwloadImage()">
								</div>
								{% endif %}
							</div>
							<div class = "mt-4 d-flex flex-column align-items-center justify-content-center">
								<button class = "btn btn-primary"
									onclick = "show_size_color_tool();">
									Size Guide & Wall Color Tool
								</button>
								<div class = "row">
									<span style="font-size:0.7rem;">(Change artwork size and wall color)</span>
								</div>
							</div>
						</div>
						
						
						<div class = "col-12 d-block d-md-none d-flex justify-content-center align-items-center" 
						style = "max-width: 100%; height:350px;">
							<img id = "prod-img-card" src="" 
								alt ="Wall Art: {{product.name}} | 3D view" 
								style = "max-width:350px; min-width: 20vw; min-height: 10vh; max-height:350px;">
						</div>
						<div class = "col-12 d-block d-md-none mt-1" style = "max-width: 100%;">
							<button data-target='tooltip' title = "Add to favourites" 
									class="btn btn-sm pull-right" style = "background-color:#fff; border: 1px solid #cfcfcf; border-radius: 50%; padding:3px;"
									onclick="addProdToWishlist({{product.product_id}},1)">
								<i class="fa fa-heart-o fa-lg" ></i>
							</button>
							{% if img_download_flg %}
							<div class = "row">
								<img src = "{% static 'img/download_btn.png' %}" width=80 alt="download image"
									onclick = "donwloadImage()">
							</div>
							{% endif %}
						</div>
						<div class = "col-12 d-block d-md-none mt-2" style = "max-width: 100%;">
							<div class = "row">	
								<div class = "col-4 d-flex align-items-center" style = "border-radius: 5%;">
									<img alt ="Wall Art: {{product.name|truncatechars:10}} | 3D view" 
										class = "card-thumb" id = "prod-img-card-thumb" 
										style = "max-height: 80px; max-width: 80px;">
								</div>
								<div class = "col-4 d-flex align-items-center" style = "border-radius: 5%;">
									<img alt ="Wall Art: {{product.name|truncatechars:10}} | Front view" class = "card-thumb" id = "prod-card1" 
										 style = "max-height: 80px; max-width: 80px;">
								</div>
								<div class = "col-4 d-flex align-items-center" style = "border-radius: 5%;">
									<img src = '' alt ="Wall Art: {{product.name|truncatechars:10}} | On the wall" class = "card-thumb" id = "prod-card2" 
										 style = "max-height: 80px; max-width: 80px;">
								</div>
							</div>
						</div>
						<div class = "col-12 d-block d-md-none">						
							<div class = "mt-4 d-none d-md-flex flex-column align-items-center">
								<button class = "btn btn-primary"
									onclick = "show_size_color_tool();">
									Size Guide & Wall Color Tool
								</button>
								<div class = "row">
									<span style="font-size:0.7rem;">(Change artwork size and wall color)</span>
								</div>
							</div>
						</div>
						<div class="col-12 col-md-5">
							<div class = "row">
								<div class = "col-12">
									<div class = "show_on_small_only">
										<div class = " mt-2 row">
										&nbsp;
										</div>
									</div>
									<div class= "pull-left">
										<h2 id = "prod-name">{{ product.name }}</h2>
										<h3 id = "artist"> {% if product.artist %} By {{product.artist}} {% endif %} </h3>
									</div>
									<div class="price pull-right">
										<div id = "promo-display" style = "display:none; line-height: 1;">
											<small id = "item_unit_price" style = "color:red; text-decoration: line-through;">{{product.price|floatformat:"0"}}</small>
											<i class="fa fa-inr" aria-hidden="true">&nbsp;</i><span id = "item_total_price" style = "text-decoration: underline;">{{product.price|floatformat:"0"}}</span>
											<br /><span id = "disc" style = "font-size:0.75rem;" class = "pull-right text-muted"></span>
											<br /><span style = "font-size: 0.65rem;">(Including taxes)</span>											
										</div>	
										<div id = "no-disc" style = "line-height: 1;">
											<i class="fa fa-inr" aria-hidden="true">&nbsp;</i><span id="prod-price">{{product.price|floatformat:"0"}}</span>
											<br /><span style = "font-size: 0.65rem;">(Including taxes)</span>
										</div>
										<div id = "item_unit_price_nv" style = "display:none;"></div>
										<div id = "promotion_id_nv" style = "display:none;"></div>
										<div id = "disc_amt_nv" style = "display:none;"></div>
										<div id = "item_total_price_nv" style = "display:none;"></div>
									</div>
								</div>								
							</div>
							<hr>
							<div class = "row mt-3 d-flex d-md-none justify-content-center">
								<button class = "btn btn-primary"
									onclick = "show_size_color_tool();">
									Size Guide & Wall Color Tool
								</button>
								<div class = "text-center">
									<span style="font-size:0.7rem;">(Change artwork size and wall color)</span>
								</div>
							</div>
							<div class = "row mt-3">
								<div class = "col-6">
									<div class = "row">
										<div class = "col-12" style = "">
											<div id = "print-med" class = "size-title">PRINT SURFACE:</div>
										</div>
										<div class = "col-12">
											<span id="print-surface" title='Choose print surface'
												data-placement="right">
											{% for m in printmedium %}
												{% if m.medium_id != 'NA' %}
													<span id= "m-{{m.medium_id}}" class = "p_size pull-left"
														onclick = "print_medium_change('{{m.medium_id}}'); {% if m.medium_id == 'PAPER' %} $('#mouldings_include_paper').show(); $('#mouldings_include_canvas').hide(); {% else %}  $('#mouldings_include_paper').hide(); $('#mouldings_include_canvas').show();  {% endif %}">
														{{ m.medium_id|upper }}
													</span>
												{% endif %}
											{% endfor printmedium %}
											</span>
										</div>
									</div>
								</div>
								<div class = "col-6">
									<div class = "row">
										<div class = "col-12">
											<div class = "label pull-right" style = "font-size:0.6rem;">
												<input id = "no-frame" type = "checkbox">
												BUY WITHOUT FRAME
											</div>
										</div>
										<div class = "col-12 mt-2" id = "stretched">
											<div class="label pull-right" style = "font-size:0.6rem;">
												<input id = "in_stretched" type = "checkbox" onchange="stretch_changed();">
												STRETCHED CANVAS
											</div>
										</div>
										<div class = "col-12 mt-2" style = "font-size:0.8rem;" class = "checkbox row"
											id = "whatis_stretched">
											<i class = "fa fa-question-circle pull-right"
												id="strt" 
												onclick="$('#stretched-modal').modal('show');">
												<span style = "color:#11b6bd; font-size:0.65rem; text-decoration:underline;">
													What's 'Stretched Canvas'?
												</span>
											</i>
										</div>
									</div>
								</div>
							</div>
							<!--
							<div class = "row" id ="stretched" style = "padding-right: 15px;">
								<div class = "col-12 mt-3" style = "font-size:0.8rem;" class = "checkbox row">
									<label class="checkbox-inline">
										<input id="in_stretched" name="in_stretched"
											onchange = "stretch_changed();"
											type = "checkbox"> <strong>Stretched Canvas</strong>
									</label>
									<i class = "fa fa-question-circle pull-right" 
										data-toggle="tooltip" title="Click to know more!"
										id="strt" 
										onclick="$('#stretched-modal').modal('show');">
										<span style = "color:#11b6bd; font-size:0.65rem; text-decoration:underline;">
											What is 'Stretched Canvas'?
										</span>
									</i>
								</div>
							</div>										

							-->
							<div class="row mt-4">
								<div class="col-6 text-center mb-1" style = "line-height: 1;">
									<span class = "fa fa-arrow-down" style = "font-size:0.7rem;">Choose framed sizes</span>
								</div>
								<div class="col-6 text-center mb-1" style = "line-height: 1;">
									<span class = "fa fa-arrow-down" style = "font-size:0.7rem;">Customize size, frame etc.</span>
								</div>
								<div class="col-12">
									<nav class = "nav-justified">		
										<div class="nav nav-tabs nav-fill" id="nav-tab" role="tablist">
											<a class="nav-item nav-link active" id="nav-frame-tab" data-toggle="tab" title = "Choose from ready sizes, framed" href="#nav-frame" role="tab" aria-controls="nav-home" aria-selected="true" >FRAMED</a>
											<a class="nav-item nav-link" id="nav-customize-tab" data-toggle="tab" href="#nav-customize" role="tab" aria-controls="nav-profile" aria-selected="false" 
											data-placement="top" 
											title="Customize Size, Frame etc."
											data-type = "primary">
											CUSTOMIZE</a>
										</div>
										
									</nav>
								</div>
							</div>

							<div class="tab-content px-sm-0" id="nav-tabContent" style = "padding:0 15px !important;">
								<div class="tab-pane fade show active" id="nav-frame" role="tabpanel" aria-labelledby="nav-frame-tab">
									<div class="row" style = "padding:25px 25px 5px;">										
										<div id = "mouldings_include_paper">
											{% include 'artevenue/ready_sizes_paper.html' %}
										</div>
										<div id = "mouldings_include_canvas" style="display:none;">
											{% include 'artevenue/ready_sizes_canvas.html' %}
										</div>											
									</div>
								</div>
								
								<div class="tab-pane fade" id="nav-customize" role="tabpanel" aria-labelledby="nav-customze-tab">
									<div class="row mt-3">
										<div class="col-12 col-md-6">
											<div id = "print-size" class = "size-title">PRINT SIZE:</div>
											<div id="size-slider"></div>
											<div class = "text-center" style = "font-size: 0.8rem;">
												(Sizes in inches)
											</div>
										</div>
										<div class = "col-12 col-md-6">
											<div class = "row">
												<div class = "col-6">												
													<div class = "form-group">
														<label>Width:</label>
														<input class = "form-control" name = "i_width" id = "i_width" type = "number" value="16"  min = '8'>
													</div>
												</div>
												<div class = "col-6">												
													<div class = "form-group">
														<div class = "form-group">
															<label>Height:</label>
															<input class = "form-control" name = "i_height" id = "i_height" type = "number" min = '8'> 
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
									<hr>
									<div class = "row">
										<div class = "col-6">
											<span class = "size-title">FRAME:</span>
										</div>
										<div class = "col-6">
											<button class = "btn btn-outline btn-sm pull-right" onclick="removeFrame();"><i class = "pull-right fa fa-remove" > Remove Frame</i></button>
										</div>
									</div>
									<div id = "mouldings_include" class = "mt-3">
										{% include 'artevenue/mouldings_include_customize.html' %}
									</div>											
									<hr>
									<span id = "mount-show">
										<div class = "row mb-3">
											<div class = "col-6">
												<span class = "size-title">MOUNT</span> 
												<i style = "cursor: pointer;" onclick = "$('#framed-product-modal').modal('show');" class="fa fa-question-circle"></i>
											</div>
											<div class = "col-6">
												<button class = "btn btn-outline btn-sm pull-right" onclick = "removeMount();">
													<i class = "fa fa-remove" > Remove Mount</i>
												</button>
											</div>
										</div>
										<div class = "row">
											<div class = "col-3">
												<span class = "size-title">COLOR:</span>
											</div>
											<div class = "col-9">
											<div class = "row">
											{% for m in mounts %}
											<div class = "col-1 mr-3 mb-3">
												<button class = "btn mount" 
													id = "mnt_{{m.mount_id}}"
													style = "border:1px solid grey; background-color:{{m.color}};" 
													data-toggle="tooltip" 
													title = "{{m.name}}"  
													onclick = "set_mount_color('{{m.color}}'); mount_id_change('{{m.mount_id}}');">
												</button>
											</div>
											{% endfor %}
											</div>
											</div>
										</div>
										<div class = "row mb-3">
											<div class = "col-5">
												<span class = "size-title">WIDTH <small>(Inches)</small>:</span>
											</div>
											<div class = "col-4">
												<input class = "form-control" 
													type = "number"  
													onchange="mount_size_change(this.value, this.value, this.value, this.value, this.value);" 
													name = "mount-size" 
													id = "mount-size" 
													min = "1" max = "5" 
													value = "1" >
											</div>
										</div>
									</span>
								</div>
							</div>
							{% if not user.is_authenticated %}
							<div class = "row mt-3">
								<div class = "col-12">
									<hr>
								</div>
							</div>
							<div class = "row mt-3 d-flex px-3">
								<div id = "signupsave" class = "col-12 text-center d-flex py-1" style = "border: 1px solid #11b6bd; cursor:pointer;">
									<img src="{% static 'img/signup_callout.png' %}" alt="Sign and save 15% on Wall art painting" width=40 onclick = "$('#signup_popup-modal').modal('show');" align="left" style = "margin:auto;">
									<ul style = "list-style: none; margin: auto;">
									<li class = "align-middle" style = "font-size:0.9rem; cursor: pointer; color:#11b6bd;"
										onclick = "$('#signup_popup-modal').modal('show');">
										Tap to Sign Up & Save 15%.
									</li>
									</ul>
								</div>
								<div class = "col-12 text-center py-2">
									<div style = "font-size:0.6rem; line-height: 1;"> Discount coupon gets automatically applied 
										in your cart. Price shown here is before discount.
									</div>
								</div>	
							</div>
							{% else %}
								{% if v15off %}
								<div class = "row mt-3">
									<div class = "col-12">
										<hr>
									</div>
								</div>
								<div class = "row mt-3 d-flex px-3">
									<div class = "col-12 text-center d-flex py-1" style = "border: 1px solid #11b6bd;">
										<img src="{% static 'img/signup_callout.png' %}" alt="Save 15% on Wall art painting" width=40 align="left" style = "margin:auto;">
										<ul style = "list-style: none; margin-left: 15px; margin-top: 0px; margin-bottom:0px;">
										<li class = "align-top" style = "font-size:0.9rem; cursor: pointer; color:#11b6bd;">
											You are eligible to get 15% off on total cart value.
										</li>
										</ul>
									</div>
									<div class = "col-12 text-center py-2">
										<div style = "font-size:0.6rem; line-height: 1;"> Discount coupon gets automatically applied 
											in your cart. Price shown here is before discount.
										</div>
									</div>	
								</div>
								{% endif %}							
							{% endif %}
							<div class = "row">
								<div class = "col-12">
									<hr>
								</div>
							</div>
							<div class = "col-12 sticky d-flex justify-content-around">
								<div class = "" style = "color:#11b6bd; font-size:1.2rem; font-weight:600;">
									<i class="fa fa-inr" aria-hidden="true"></i><span id="prod-price-cart">{{product.price|floatformat:"0"}}</span>
								</div>
								<div id = "selected_med"  class = "" style="font-size:0.65rem;">
									<span id="prod-desc">
										Print on paper, Simple Black frame 1.2 inch, offwhite 1 inch mount
									</span>
								</div>							
								<div class = "">
									<button class="btn btn-artevenue" 
										onclick="addProdToCart({{product.product_id}}, 1)">
										<i class="fa fa-shopping-cart"></i>
										<strong>ADD TO CART</strong>
									</button>
								</div>
							</div>
							<div class = "col-12 d-flex justify-content-around">
								<i class = "fa fa-exclamation-circle">  
								Due to Covid situation in the country shipping & delivery may be delayed more than usual. 
								</i> 
							</div>
						</div>
					</div>
					<div class = "col-12">
						<div class = "row">
							<div class = "col-12">
								<hr>
							</div>	
							<div class = "col-12 py-2"
									 style ="color:#082a4c; background-color: #f6f6f6;">
								<span style = "font-weight: 600; ">ARTWORK SPECIFICATIONS</span>
							</div>
							<div id = "specs"class = "col-12" style = "">
								<ul style = "">
									<li>Art Print On: <span id = "surface"></span></li>
									<li>Print Size: <span id = "print_size"></span></li>
									<li id = "frm">Frame: <span id = "frame_spec"></span></li>
									<li id="f-mnt">Mount: <span id = "f_mount">{{i.mount.name|title}}, {{i.mount_size|floatformat}} inch</span></li>
									<li id="g-wrap">Stretched Canvas: <span id = "g_wrap">{{i.stretched_id}}</span></li>
									<li>Finished Size: <span id = "fsize"></span></li>
									<li id="rolled">The print is carefully rolled and dispatched in a tube</li>
								</ul>
								
							</div>
							<div class = "col-12 mt-5 text-center">
									<a class = "btn btn-light" style = "color: #212529;"
										onclick = "$('#how-to-customize').modal('show');">
									How to Customize? <i class = "fa fa-question-circle fa-lg"></i>
									</a>
							</div>
						</div>
					</div>
					{% include 'artevenue/artprint_product_desc_include.html' %}
					<div class = "row mt-3" style = "font-size: 0.8rem;">
						<div class = "col-12">
							<hr>
						</div>	
							<div class = "col-12 py-2"
									 style ="color:#082a4c; background-color: #f6f6f6;">
								<span style = "font-weight: 600; ">ARTE'VENUE ADVANTAGE</span>
							</div>
						<div class = "col-6 col-md-3">
							<ul style = "list-style-position: outside;">
								<li>Licensed Art Print</li>
							</ul>
						</div>
						<div class = "col-6 col-md-3">
							<ul style = "list-style-position: outside;">
								<li>Premium Quality</li>
							</ul>
						</div>
						<div class = "col-6 col-md-3">
							<ul style = "list-style-position: outside;">
								<li>Free Shipping Across India</li>
							</ul>
						</div>
						<div class = "col-6 col-md-3">
							<ul style = "list-style-position: outside;">
								<li>Returns Accepted</li>
							</ul>
						</div>
					</div>
					{% include 'artevenue/artevenue_more_info_include.html' %}

					<div class = "col-12 text-center">
						<div class = "row">
							<div class = "col-12 col-md-6">
								<div class = "row mt-5">
									<div class = "col-12 py-2 text-center" style ="color:#082a4c; background-color: #f6f6f6;">
										<span style = "font-weight:600; ">BUY ART HASSLE FREE</span>
									</div>
									<div class = "col-12 text-center mt-3">
										<iframe width="320" height="240" src="https://youtube.com/embed/6vRss_YY48I" frameborder="0" allowfullscreen>
										</iframe>				
									</div>
								</div>
							</div>
							<div class = "col-12 col-md-6">
								<div class = "row mt-5">
									<div class = "col-12 py-2 text-center" style ="color:#082a4c; background-color: #f6f6f6;">
										<span style = "font-weight:600; ">IMPECCABLE QUALITY</span>
									</div>
									<div class = "col-12 text-center mt-3">
										<iframe width="320" height="240" src="https://youtube.com/embed/vSrersiMjWk" frameborder="0" allowfullscreen>
										</iframe>				
									</div>
								</div>
							</div>
						</div>
					</div>
					
					<!-- Similar products -->
					<div class = "row mt-5">
						<div class = "col-12">
							<hr>
						</div>	
						<div class = "col-12 mt-3 py-2"
								 style ="color:#082a4c; background-color: #f6f6f6;">
							<span style = "font-weight: 600; ">YOU MAY ALSO LIKE </span>
						</div>
						{% if prods %}
						<div class = "col-12">
							<div id = "similar-show" style = "background-color:#fafafa">
								<div id = "similar_include">
									{% include 'artevenue/similar_products.html' %}
								</div>
							</div>
						</div>
						{% endif %}
					</div>
					<div class = "row mt-5">
						<div class = "col-12">
							<hr>
						</div>	
						<div class = "col-12 py-2" style ="color:#082a4c; background-color: #f6f6f6;">
							<span style = "font-weight:600;">CUSTOMER REVIEWS</span>
						</div>
						<div class = "col-12">
							{% customer_review product.product_id cart_item.cart_item_id wishlist_item.wishlist_item_id iuser_width iuser_height %}
						</div>
					</div>
					<div class = "row mt-2">
						<hr>
					</div>
					
					{% include 'artevenue/how_to_tips.html' %}

				</div>
			</div>
			
			{% include 'artevenue/wall_color_tool.html' %}
			{% include 'artevenue/cart-add-message.html' %}
			{% include 'artevenue/wishlist-add-message.html' %}
			{% include 'artevenue/message-modal_ok.html' %}
			{% include 'artevenue/signup_ask_modal.html' %}
			{% include 'artevenue/signup_modal.html' %}
			{% include 'artevenue/how_to_customize_modal.html' %}
			<div id="stretched-modal" tabindex="-1" role="dialog" aria-labelledby="What is Stretcher" aria-hidden="true" class="modal fade">
				<div class="modal-dialog modal-sm">
					<div class="modal-content">
						<div class="modal-header">
							<h3 class="modal-title">Stretched Canvas Print</h3>
							<button type="button" data-dismiss="modal" aria-label="Close" class="close"><span aria-hidden="true">×</span></button>
						</div>
						<div class="modal-body">
							<div class="">
								<img src = "{% static 'img/canvas_stretched.jpg' %}" 
									alt = "What is Stretched Canvas"
									style = "display:block; margin-left:auto; margin-right:auto; width:200px;">
								<ul class = "mt-3" style = "font-size:0.75rem;">
									<li>Please check the "Streched" checkbox to get the art 
										printed on canvas and streched on a wooden frame as 
										shown above. </li>
									<li>If not checked, we print art on canvas, roll it and 
									deliver it in a tube.</li>
								</ul>
							</div>
						</div>
					</div>
				</div>
			</div>

		
	{% endblock sitecontent %}
	
	
	{% block jscripts %}
	<script>
		var isBreakpoint = function(viewport_size){
		  //return $('.device-' + viewport_size).is(':visible');
		  if (viewport_size == 'xs'){
			return window.innerWidth < 768;
		  }
		  if (viewport_size == 'sm'){
			return window.innerWidth < 991;
		  }
		  if (viewport_size == 'md'){
			return window.innerWidth < 1199;
		  }
		  if (viewport_size == 'lg'){
			return window.innerWidth > 1199;
		  }
		}
	</script>
		
	<script>
		function startMagnify(){
			if (isBreakpoint('xs')==false) {
				magnify("prod-img", 3);
			}
		}
		
		function stopMagnify(){
			if (isBreakpoint('xs')==false) {
				removeGlass();
			}
		}

	</script>
	
	<script>
		// Global variables to store IDs of pricing components
		var product_id = '{{product.product_id}}';
		var print_medium_id = 'PAPER';
		var image_width = 8;
		var image_height = 8;
		var moulding_id = '0';
		var mount_id = '0';
		var mount_color = '0';
		var mount_size = '1'; // Default is 1 inch
		var mount_w_left, mount_w_right, mount_w_top, mount_w_bottom = '0';
		var board_id = '{{boards.board_id}}';
		var acrylic_id = '{{acrylics.acrylic_id}}';
		var stretch_id = '1'; 
		var def_mount_id = '3';	 

		var minsize = 8;
		var maxsize = 0;
		var ratio = 0;

		$body = $("body");
		
		{% if product.artist == "Huynh, Duy" %}
			minsize = 16;
		{% endif %}

		var fetch_img_on_slide = true;

		if ("{{product.aspect_ratio}}" != "NA"){
			ratio = parseFloat("{{product.aspect_ratio}}");
		}
		
		$( "#i_width" ).change(function() {
			currwidth = $(this).val();
			set_size_slider(currwidth);
		});
		$( "#i_height" ).change(function() {
			currheight = $(this).val();
			if (currheight < 8){
				currheight = 8;
			}
			currwidth = Math.round(currheight * ratio);
			set_size_slider(currwidth);
		});

		$('#no-frame').change(function () {
			if ( $(this).is(':checked') ) {
				buy_without_frame_change(true);
			} else {			
				buy_without_frame_change(false);
			}
		});

		
		/*************************/
		/* Getter setter methods */
		/*************************/		
		// Product_id
		function set_product_id (prd_id) {
			product_id = prd_id;
		}
		
		function get_product_id () {
			return product_id
		}
		
		// print_medium_id
		function set_print_medium_id (prt_med) {
			print_medium_id = prt_med;
		}
		function get_print_medium_id () {
			return print_medium_id;
		}
		
		// Image width, height
		function set_image_width(wdt) {
			image_width = wdt;
		}
		function get_image_width () {
			return image_width;
		}
		function set_image_height(hgt) {
			image_height = hgt;
		}
		function get_image_height () {
			return image_height;
		}

		//moulding_id
		function set_moulding_id(m_id) {
			moulding_id = m_id;
		}
		function get_moulding_id() {
			return moulding_id;
		}

		//mount_id
		function set_mount_id(mnt_id) {
			mount_id = mnt_id;
		}
		function get_mount_id() {
			return mount_id;
		}

		//mount_color
		function set_mount_color(mnt_color) {
			mount_color = mnt_color;
		}
		function get_mount_color() {
			return mount_color;
		}
		
		//mount_size
		function set_mount_size(mnt_size) {
			mount_size = mnt_size;
			$("#mount-size").val(mnt_size);
		}
		function get_mount_size() {
			return mount_size;
		}
		
		//acrylic_id
		function set_acrylic_id(acr_id) {
			acrylic_id = acr_id;
		}
		function get_acrylic_id() {
			return acrylic_id;
		}

		//board_id
		function set_board_id(brd_id) {
			board_id = brd_id;
		}
		function get_board_id() {
			return board_id;
		}
		
		//stretch_id
		function set_stretch_id(strt_id) {
			stretch_id = strt_id;
		}
		function get_stretch_id() {
			return stretch_id;
		}

		function set_default_frame_mount(){
			var print_size = get_image_width();
			if ( get_print_medium_id() == 'PAPER') {				
				if (print_size <= 18) {
					set_mount_size('1');
					set_moulding_id('18');
				} else if (print_size <= 26) {
					set_mount_size('2');
					set_moulding_id('24');
				} else if (print_size <= 34) {
					set_mount_size('3');
					set_moulding_id('24');
				} else {
					set_mount_size('4');
					set_moulding_id('24');
				}
				set_mount_color('#fffff0');
				set_mount_id('3');
				set_board_id('1');
				set_acrylic_id('1');
				set_stretch_id('0');
			} else {			
				set_mount_id('0');
				set_mount_size('1');
				set_mount_color('');
				set_board_id('0');
				set_acrylic_id('0');
				if (print_size <= 18) {
					set_moulding_id('26');
				} else if (print_size <= 26) {
					set_moulding_id('18');
				} else {
					set_moulding_id('24');
				}
				set_stretch_id('1');
			}

		}
		
		// Set print display size
		function print_size_display(wth, hgt){
			if (hgt < 4 || wth < 4){
				return;
			}
			txt = 'Art print on ' + print_medium_id + ', Print Size: ' + wth.toString() + ' X ' + hgt.toString() + ' inch';
			$("#surface").html(print_medium_id);
			$("#print_size").html(wth.toString() + ' X ' + hgt.toString() + ' inch');
			$("#g-wrap").hide();
			var f_size = 0;
			var mnt_size = 0;
			var frame_width = image_width;
			var frame_height = image_height;
			if (moulding_id != '0' && moulding_id != ''){
				$("#frm").show();
				$("#d-frame").show();
				if (get_print_medium_id() == 'PAPER'){
					{% for f in paper_mouldings_show %}
						if ('{{f.moulding_id}}' == moulding_id) {			
							txt = txt + ', Frame: {{f.moulding__name}}';
							f_size = {{f.moulding__width_inner_inches}};
							$("#frame_spec").html('{{f.moulding__name}}' + "({{f.moulding__width_inner_inches}} inch)" );
						}
					{% endfor %}
				} else {
					{% for f in canvas_mouldings_show %}
						if ('{{f.moulding_id}}' == moulding_id) {			
							txt = txt + ', Frame: {{f.moulding__name}}';
							f_size = {{f.moulding__width_inner_inches}};
							$("#frame_spec").html('{{f.moulding__name}}' + "({{f.moulding__width_inner_inches}} inch)" );
						}
					{% endfor %}
				}
				
				frame_width = frame_width + f_size*2;
				frame_height = frame_height + f_size*2;
				
				if (print_medium_id == 'PAPER'){
					var mnt_color = '';
					if (mount_id != '0' && mount_id != '') {
						$("#f-mnt").show();
						{% for m in mounts %}
							if ( '{{m.mount_id}}' == mount_id ) {
								mnt_color = '{{m.name|title}}';
							}
						{% endfor %}
					
						txt = txt + ", " + mount_size + ' inch ' + mnt_color + ' mount';
						$("#f_mount").html(mount_size + '" inch, ' + 'Color: ' + mnt_color );
						mnt_size = parseFloat(mount_size);
						frame_width = frame_width + mnt_size*2;
						frame_height = frame_height + mnt_size*2;
					} else {
						$("#f-mnt").hide();
					}
					$("d-acrylic").show();
				} else {
					$("d-acrylic").hide();
					$("d-mount").hide();
					$("#f-mnt").hide();
				}
			} else  {
				$("#frm").hide();
				$("#d-frame").hide();
				$("d-acrylic").hide();
				$("#f-mnt").hide();
				if (get_stretch_id() == '1'){
					$("#g-wrap").show();
					txt = txt + ", Stretched Canvas";
					$("#g_wrap").html("Canvas wrapped over wooden frame at the back");
					$("d-stretch").show();
				} else {
					$("#g-wrap").hide();
					$("d-stretch").hide();
				}
			}
			
			frame_width = Math.round(frame_width);
			frame_height = Math.round(frame_height);
			details_txt = txt + ', Finished Size:' + frame_width.toString() + '" X ' + frame_height.toString() + '" inch';
			txt = 'Finished Size: ' + frame_width.toString() + '" X ' + frame_height.toString() + '" inch <br />FREE SHIPPING';
			$('#prod-desc').html(txt);
			$('#prod-details').html(details_txt);
			$("#fsize").html(frame_width.toString() + '" X ' + frame_height.toString() + '" inch');
			
			if ( (get_moulding_id() == '' || get_moulding_id() == '0') && (get_stretch_id() == '0' || get_stretch_id() == '') ){
				$("#rolled").show();
			} else {
				$("#rolled").hide();
			}
		}
		
		/******************/
		/* Events         */
		/******************/
		function print_medium_change(prt_med, fetch_img=true, set_defaults=true){
			set_print_medium_id(prt_med);
			var mld_id = get_moulding_id();
			var mnt_color = '';
			var mnt_size = '0';
			if (prt_med == 'PAPER') {
				if (set_defaults) {
					set_default_frame_mount();
				}
				mnt_color = get_mount_color();
				mnt_size = get_mount_size();
				$("#stretched").hide();
				$("#whatis_stretched").hide();
				$("#d-paper").show();
				$("#d-canvas").hide();
				$("#d-stretch").hide();				
				set_stretch_id('0');
				$("#m-PAPER").addClass("p_clicked");
				$("#m-CANVAS").removeClass("p_clicked");
				$("#mount-show").show();
				{% for m in mounts %}
					$("#mnt_{{m.mount_id}}").show();
				{% endfor %}
				if (mld_id != '' && mld_id !== '0'){
					set_acrylic_id('1');
					set_board_id('1');
					set_mount_id(def_mount_id);
				}
				
				$("#paper-frames").show();
				$("#canvas-frames").hide();
				$('#frames-slider-paper').slick('setPosition');	
				
			} else if (prt_med == 'CANVAS') {
					mnt_color = '';
					mnt_size = '0';
					set_mount_id('0');
					if (set_defaults) {
						set_default_frame_mount();
					}
					mld_id = get_moulding_id();
					$("#m-CANVAS").addClass("p_clicked");
					$("#m-PAPER").removeClass("p_clicked");
					$("#mount-show").hide();
					$("#d-paper").hide();
					$("#d-canvas").show();
					$("#f-mnt").hide();
					{% for m in mounts %}
						$("#mnt_{{m.mount_id}}").hide();
					{% endfor %}
					/*
					if (mld_id != '' && mld_id != '0'){
						$("#stretched").hide();
						$("#in_stretched").prop("disabled", true);
						$("#in_stretched").prop("checked", true);
						set_stretch_id('1');
					} else {
						$("#stretched").show();
						$("#in_stretched").prop("checked", false);
						$("#in_stretched").prop("disabled", false);
						set_stretch_id('1');
					}	
					*/					
					/*
					if (document.getElementById('in_stretched').checked) {				
						set_stretch_id('{{stretches.stretch_id}}');
						if (mld_id == '' && mld_id == '0'){
							$("#d-stretch").show();
						}
					} else {
						set_stretch_id('0');
						$("#d-stretch").hide();
					}
					*/
					if (mld_id == '' || mld_id == '0'){
						if (get_stretch_id() == '1') {
							$("#in_stretched").prop("checked", true);
						} else {
							$("#in_stretched").prop("checked", false);
						}
					}
					$("#stretched").show();	
					$("#whatis_stretched").show();

					$("#paper-frames").hide();
					$("#canvas-frames").show();
					$('#frames-slider-canvas').slick('setPosition');
					
				} else {
						return;
			}
			
			calc_total_price();
			print_size_display(image_width, image_height);

			/////////////////////////
			//var currwidth = get_image_width()
			var currwidth = 10;
			/////////////////////////


			if (fetch_img == true){
				$.ajax({
						url: "{% url 'get_framed_image' %}", 
						data: {'prod_id':get_product_id(), 'moulding_id': get_moulding_id(),
								'mount_color':mnt_color, 'mount_size':mnt_size, 'image_width':currwidth,
							'stretched_canvas': get_stretch_id()
							}, 
						dataType: 'text', 
					success: function (data) {
						document.getElementById("prod-img").src = "data:image/png;base64," + data;
						document.getElementById("prod-img-card").src = "data:image/png;base64," + data;
						document.getElementById("prod-img-card-thumb").src = "data:image/png;base64," + data;
						document.getElementById("card0").src = "data:image/png;base64," + data;
						get_cards();
					},
					error: function(xhr){
						alert("An error occured: " + xhr.status + " " + xhr.statusText); 
					}
				});
			}
		}
			

		function moulding_change(m_id, fetch_img = true){
			if ((m_id == '' || m_id == '0') && get_stretched_id() == '0'){
				$("#d-frame").hide();
				$("#card1").hide();
				$("#prod-card1").hide();
				if ( get_print_medium_id() == 'CANVAS'){
					$("#streched").show();
					$("#whatis_stretched").show();
				}
				return;
			} else {
				$("#card1").show();
				$("#prod-card1").show();
				$("#streched").show();
				if ( get_print_medium_id() == 'CANVAS'){
					$("#in_stretched").prop('checked', false);
					$("#whatis_stretched").show();
				}
			}
			
			$("#d-frame").show();
			set_moulding_id(m_id);
			$('#no-frame').prop('checked', false);
			var mnt_color = '';
			var mnt_size = '0';
			
			// Add acrylic and board, or stretcher when a moulding is selected
			if (print_medium_id == 'PAPER') {
				if (m_id == '20' || m_id == '8' || m_id == '6' ) {
					set_mount_id('1');
					set_mount_color('#ffffff');
				} else {
					mnt_color = get_mount_color();
				}
				mnt_size = get_mount_size();
				set_acrylic_id("{{acrylics.acrylic_id}}");
				set_board_id('{{boards.board_id}}');
			} else if (print_medium_id == 'CANVAS'){
					// Set the stretch by default if moulding selected on Canvas
					mnt_color = '';
					mnt_size = '0';										
					if (get_moulding_id() == '' || get_moulding_id() == '0') {
						$("#d-stretch").show();
						if (get_stretch_id() == '1') {
							$("#in_stretched").prop("checked", true);
						} else {
							$("#in_stretched").prop("checked", false);
						}
					} else {
						$("#d-stretch").hide();
						set_stretch_id('1');
					}
			}
			if (fetch_img == true){
				getFramedImg (product_id, moulding_id, mnt_color, mnt_size);
			}
			
			//Calculate the price
			calc_total_price();
			print_size_display(image_width, image_height);
		}
			
		
		function mount_id_change(mnt_id, fetch_img = true ) {
			if (mnt_id == '' || mnt_id == '0'){
				return;
			}
			set_mount_id(mnt_id);
			mnt_size = $("#mount-size").val();
			if (mnt_size >= '5' || mnt_size == '' || mnt_size == '0') {
				alert("Mount size should be between 1 and 5 inch");
				return;
			}
			set_mount_size(mnt_size);
			if (print_medium_id == 'PAPER') {
				if (fetch_img == true){				
					getFramedImg (product_id, moulding_id, mount_color, mount_size);
				}
				calc_total_price();
				print_size_display(image_width, image_height);
			}
		}
		
		function mount_size_change(mnt_size, fetch_img = true ){
			if (mnt_size == '' || mnt_size == '0'){
				return;
			}
			set_mount_size(mnt_size);
			if (mnt_size >= '5' || mnt_size == '' || mnt_size == '0') {
				alert("Mount size should be between 1 and 5 inch");
				return;
			}
			if (print_medium_id == 'PAPER') {
				calc_total_price();
				print_size_display(image_width, image_height);
				if (fetch_img == true){
					getFramedImg (product_id, moulding_id, mount_color, mount_size);
				}
			}				
		}
		function mount_size_change(mnt_size, mnt_w_left, mnt_w_right, mnt_w_top, mnt_w_bottom, fetch_img = true){
			if (mnt_size == '' || mnt_size == '0'){
				return;
			}
			mount_w_left = mnt_w_left;
			mount_w_right = mnt_w_right
			mount_w_top = mnt_w_top;
			mount_w_bottom = mnt_w_bottom;
			set_mount_size(mnt_size);
			if (print_medium_id == 'PAPER') {
				calc_total_price();
				print_size_display(image_width, image_height);
				if (fetch_img == true){				
					getFramedImg (product_id, moulding_id, mount_color, mount_size);
				}
			}				
		}

		function stretch_changed(fetch_img = true){
			if ($("#in_stretched").prop('checked')){
				set_stretch_id('1');
				$('#no-frame').prop('checked', false);
				set_moulding_id('0');
				$("#d-stretch").show();
			} else {
				set_stretch_id('0');
				$("#d-stretch").hide();
				buy_without_frame_change(true, false )
			}
			if (fetch_img == true){
				getFramedImg (product_id, moulding_id, mount_color, mount_size);
			}
			print_size_display(image_width, image_height);
			calc_total_price();
		}
		
		function buy_without_frame_change(yesno, fetch_img = true ){
			if (yesno == true){
				set_mount_id('0');
				set_mount_color('0');
				set_acrylic_id('1');
				set_board_id('1');
				set_moulding_id('0');
				set_mount_size('1');
				set_stretch_id('0');
				$("#in_stretched").prop("checked", false);
				$('#no-frame').prop('checked', true);
				if (print_medium_id == 'CANVAS') {
					set_stretch_id('0');
					//$("#in_stretched").prop("disabled", false);
					$("#stretched").show();
					$("#whatis_stretched").show();
					if (get_moulding_id() == '0' || get_moulding_id() == ''){
						$("#d-stretch").show();
					} else {
						$("#d-stretch").hide();						
					}
				} else { 
					set_stretch_id('0');
					$("#stretched").hide();
					$("#whatis_stretched").hide();
					$("#d-stretch").hide();
				}
			} else {
				if (print_medium_id == 'PAPER') {
					set_mount_id(def_mount_id);
					set_mount_color('#fffff0');
					var mnt_size = $("#mount-size").val();
					set_mount_size(mnt_size);
					set_acrylic_id('1');
					set_board_id('1');
					$("#stretched").hide();
					$("#whatis_stretched").hide();
				} else {
					set_mount_id('0');
					set_mount_color('');
					set_stretch_id('1');
					set_mount_size('1');					
				}
				
				$("#d-stretch").hide();
				set_moulding_id('18');
				$('#no-frame').prop('checked', false);
			}
			if (fetch_img == true){
				getFramedImg (product_id, moulding_id, mount_color, mount_size);
			}
			calc_total_price();
			print_size_display(image_width, image_height);
		}
		
		function removeFrame(fetch_img = true){
			set_moulding_id('0');
			set_mount_id('0');
			set_mount_color('');
			set_mount_size('0');
			$("#card1").hide();
			$("#prod-card1").hide();
			if (print_medium_id == 'PAPER') {
				//$("#in_stretched").prop("checked", false);
				//$("#in_stretched").prop("disabled", true);			
				$("#stretched").hide();
				$("#whatis_stretched").hide();
				$("#d-stretch").hide();
				set_stretch_id('0');
			} else {
				//$("#in_stretched").prop("checked", true);
				//$("#in_stretched").prop("disabled", false);
				$("#stretched").show();
				$("#whatis_stretched").show();
				$("#d-stretch").show();
			}
			$('#no-frame').prop('checked', true);
			if (fetch_img == true){
				getFramedImg (product_id, moulding_id, mount_color, mount_size);
			}
			calc_total_price();
			print_size_display(image_width, image_height);
		}
		
		function removeMount(fetch_img = true){
			set_mount_id('0');
			set_mount_color('');
			set_mount_size('0');
			if (fetch_img == true){
				getFramedImg (product_id, moulding_id, mount_color, mount_size);
			}
			calc_total_price();
			print_size_display(image_width, image_height);
		}

	</script>
			
	<script>
		$body = $("body");
		$(document).on({
			ajaxStart: function() { $body.addClass("loading");},
			ajaxStop: function() { $body.removeClass("loading");},
			//ajaxStart: function() { $("#wall-color-tool").addClass("loading");},
			//ajaxStop: function() { $("#wall-color-tool").removeClass("loading");}
		});
		
		jQuery(document).ready(function(){			
		
			$("#d-paper").hide();
			$("#d-canvas").hide();
			$("#d-frame").hide();
			$("#d-stretch").hide();
			$("#d-acrylic").hide();
		
			$("#frames-slider-paper").slick({
				dots: true,
				infinite: false,
				mobileFirst: true,
				rows: 2,
				slidesToShow: 3,
				slidesToScroll: 3,
			});
			$("#frames-slider-canvas").slick({
				dots: true,
				infinite: false,
				mobileFirst: true,
				rows: 2,
				slidesToShow: 3,
				slidesToScroll: 3,
			});

			/*
			{% if creative_exists %}
				$("#card-slider").prepend( '<div class="card-img"> <img id = "prod-img-creative" src="{{creative_url}}" alt ="Wall Art: {{product.name}} | Room view"></div>' );
				$("#desktop-thumb").prepend('<div class = "col-2"> <img id = "card-img-creative" src="{{creative_url}}" alt ="Wall Art: {{product.name}} | Room view" class = "card-thumb" style = "max-height: 80px;"></div>')
				document.getElementById("prod-img").src = document.getElementById("prod-img-creative").src;
				$( "#card-img-creative" ).hover(function() {
					var src = document.getElementById("card-img-creative").src;
					document.getElementById("prod-img").src = src;
				});
			{% endif %}
			*/

			/*
			$("#card-slider").slick({
				dots: true,
				arrows: false,
				infinite: false,
				mobileFirst: true,
				rows: 1,
				slidesToShow: 1,
				slidesToScroll: 1,
			});

			//card_html =	'<div class=" card-img"> <img id = "prod-img-creative" src="' + '/static/img/creatives/AE_Apr_17_600.jpg' + '" alt ="Wall Art: {{product.name}} | Room view"></div>';				
			//$('#card-slider').slick('slickAdd',card_html, currslide);
			//$('#card-slider').slick('slickGoTo', 1);
			*/
			

			$(".similar-prods-slider").slick({
				dots: true,
				infinite: true,
				mobileFirst: true,
				rows: 2,
				slidesToShow: 4,
				slidesToScroll: 4,
				responsive: [
					{
					  breakpoint: 1024,
					  settings: {
						slidesToShow: 4,
						slidesToScroll: 4,
					  }
					},
					{
					  breakpoint: 600,
					  settings: {
						slidesToShow: 3,
						slidesToScroll: 3
					  }
					},
					{
					  breakpoint: 480,
					  settings: {
						slidesToShow: 2,
						slidesToScroll: 2
					  }
					},
					{
					  breakpoint: 370,
					  settings: {
						slidesToShow: 2,
						slidesToScroll: 2
					  }
					}
				]
			});
				
			r = {{product.aspect_ratio}};
			if (r > 1) {
				ht = 8
				wd = Math.round(ht * r)
				{% if product.artist == "Huynh, Duy" %}
					ht = 16;
				{% endif %}
					
			} else {
				wd = 10
				{% if product.artist == "Huynh, Duy" %}
					wd = 16;
				{% endif %}
			}						

			{% if product %}
				set_product_id("{{product.product_id}}");
			{% endif %}	

			
			{% if not user.is_authenticated %}			
				{% if user.usename != "livspace" %}
				$('#signupsave').effect("highlight", {}, 3000);
				{% endif %}
			{% endif %}

			{% if cart_item or wishlist_item %}
				set_for_cart_wishlist_item();
			{% else %}
				{% if iuser_width %}
					if ({{iuser_width}} > 0) {					
						set_size_slider({{iuser_width}});
						var wd = {{iuser_width}};
						set_image_width(wd);
						var ht = Math.round(get_image_width() / ratio);
						set_image_height(ht);
						$("#i_width").val(wd);
						$("#i_height").val(ht);
						if ('{{isurface}}' != '' ){
							print_medium_change("{{isurface}}", false);
							if ( '{{isurface}}' == 'CANVAS') {
								if ( '{{str_id}}' != '') {
									set_stretch_id("{{str_id}}");
									$("#d-stretch").show();
									$("#in_stretched").prop('checked', true);
								}
							}
						} else {
							print_medium_change('PAPER', false);
						}
						if ('{{imld_id}}' != ''){
							moulding_change("{{imld_id}}", false);
						} else {
							if ( '{{isurface}}' == 'CANVAS') {
								if ( '{{str_id}}' != '') {								
									set_stretch_id("{{str_id}}");
									$("#d-stretch").show();
									$("#in_stretched").prop('checked', true);
								}
							}
						}
						if (get_print_medium_id() == 'PAPER' ){
							if ('{{imnt_id}}' != '' ){
								mount_id_change("{{imnt_id}}", false);
							}
							if ('{{ imnt_color}}' != ''){
								set_mount_color("{{imnt_color}}");	
							}
							if ('{{ imnt_size}}' != ''){
								set_mount_size("{{imnt_size}}");								
							}
						}
						//$( "#size-slider" ).slider( "option", "value", {{iuser_width}});
						//$("#paper-size-10").addClass("p_clicked");
						//$("#canvas-size-10").addClass("p_clicked");
						//set_ready_product('PAPER', {{iuser_width}}, {{iuser_width}}, false);
						//buy_without_frame_change(false, false);
						getFramedImg (product_id, moulding_id, mount_color, mount_size);
						print_size_display(image_width, image_height)
					} else {
						if ({{product.max_width}} < wd ){
							set_size_slider({{product.max_width}});
							print_medium_change('PAPER', false);
							//$( "#size-slider" ).slider( "option", "value", {{product.max_width}});
							$("#paper-size-10").addClass("p_clicked");
							$("#canvas-size-10").addClass("p_clicked");
							set_ready_product('PAPER', wd, wd, false);
							buy_without_frame_change(false, false);
						} else {
							set_size_slider(wd);
							print_medium_change('PAPER', false);
							//$( "#size-slider" ).slider( "option", "value", 10);
							$("#paper-size-10").addClass("p_clicked");
							$("#canvas-size-10").addClass("p_clicked");
							set_ready_product('PAPER', wd, wd, false);
							buy_without_frame_change(false, false);
						}
					}
				{% else %}
					if ({{product.max_width}} < wd ){
						set_size_slider({{product.max_width}});
						print_medium_change('PAPER', false);
						//$( "#size-slider" ).slider( "option", "value", {{product.max_width}});
						$("#paper-size-10").addClass("p_clicked");
						$("#canvas-size-10").addClass("p_clicked");
						set_ready_product('PAPER', wd, wd, false);
						buy_without_frame_change(false, false);				
					} else {						
						set_size_slider(wd);
						print_medium_change('PAPER', false);
						//$( "#size-slider" ).slider( "option", "value", 10);
						$("#paper-size-10").addClass("p_clicked");
						$("#canvas-size-10").addClass("p_clicked");
						set_ready_product('PAPER', wd, wd, false);
						buy_without_frame_change(false, false);
					}
				{% endif %}
			{% endif %}
			
			
			set_max_size_on_tool();

		});

		// Initialize tooltip component
		$(function () {
		  $('[data-toggle="tooltip"]').tooltip()
		})

		// Initialize popover component
		$(function () {
		  $('[data-toggle="popover"]').popover()
		})

	</script>
	
	<script>
		function set_for_cart_wishlist_item(){
			{% if cart_item %}
				set_image_width({{cart_item.image_width}});
				set_image_height({{cart_item.image_height}});
				{% if cart_item.print_medium_id %}
					set_print_medium_id("{{cart_item.print_medium_id}}");
				{% endif %}
				{% if cart_item.moulding_id %}
					set_moulding_id("{{cart_item.moulding_id}}");
				{% else %}
					set_moulding_id("0");
				{% endif %}
				{% if cart_item.mount_id %}
					set_mount_id("{{cart_item.mount_id}}");
					{% for m in mounts %}
						if ('{{m.mount_id}}' == '{{cart_item.mount_id}}'){
							set_mount_color("{{cart_item.mount.color}}");
						}
					{% endfor %}
				{% else %}
					set_mount_id("0");
				{% endif %}
				{% if cart_item.mount_size %}
					set_mount_size("{{cart_item.mount_size}}");
				{% else %}
					set_mount_size("0");
				{% endif %}
				{% if cart_item.acrylic_id %}
					set_acrylic_id("{{cart_item.acrylic_id}}");
				{% else %}
					set_acrylic_id("0");
				{% endif %}
				{% if cart_item.board_id %}
					set_board_id("{{cart_item.board_id}}");
				{% else %}
					set_board_id("0");					
				{% endif %}
				{% if cart_item.stretch_id %}
					set_stretch_id("{{cart_item.stretch_id}}");
					{% if not cart_item.moulding_id %}
					$("#d-stretch").show();
						$("#in_stretched").prop('checked', true);
					{% endif %}
				{% else %}
					set_stretch_id("0");
				{% endif %}
				set_size_slider({{cart_item.image_width}});
				$( "#size-slider" ).slider( "option", "value", {{cart_item.image_width}});

				
				{% if cart_item.print_medium_id %}
					print_medium_change("{{cart_item.print_medium_id}}", fetch_img=true, set_defaults=false);
				{% endif %}

				{% if cart_item.moulding_id %}
					moulding_change("{{cart_item.moulding_id}}");
				{% endif %}

				{% if cart_item.mount_id %}
					mount_id_change("{{cart_item.mount_id}}");
				{% endif %}

				{% if cart_item.mount_size %}
					mount_size_change("{{cart_item.mount_size}}");
				{% endif %}


			{% endif %}

			{% if wishlist_item %}
				set_image_width({{wishlist_item.image_width}});
				set_image_height({{wishlist_item.image_height}});
				{% if wishlist_item.print_medium_id %}
					set_print_medium_id("{{wishlist_item.print_medium_id}}");
				{% endif %}
				{% if wishlist_item.moulding_id %}
					set_moulding_id("{{wishlist_item.moulding_id}}");
				{% else %}
					set_moulding_id("0");
				{% endif %}
				{% if wishlist_item.mount_id %}
					set_mount_id("{{wishlist_item.mount_id}}");
					{% for m in mounts %}
						if ('{{m.mount_id}}' == '{{wishlist_item.mount_id}}'){
							set_mount_color("{{wishlist_item.mount.color}}");
						}
					{% endfor %}
				{% else %}
					set_mount_id("0");
				{% endif %}
				{% if wishlist_item.mount_size %}
					set_mount_size("{{wishlist_item.mount_size}}");
				{% else %}
					set_mount_size("0");					
				{% endif %}
				{% if wishlist_item.acrylic_id %}
					set_acrylic_id("{{wishlist_item.acrylic_id}}");
				{% else %}
					set_acrylic_id("0");					
				{% endif %}
				{% if wishlist_item.board_id %}
					set_board_id("{{wishlist_item.board_id}}");
				{% else %}
					set_board_id("0");
				{% endif %}
				{% if wishlist_item.stretch %}
					set_stretch_id("{{wishlist_item.stretch_id}}");
					{% if not wishlist_item.moulding_id %}
						$("#d-stretch").show();
						$("#in_stretched").prop('checked', true);
					{% endif %}
				{% else %}
					set_stretch_id("0");
				{% endif %}
				set_size_slider({{wishlist_item.image_width}});
				$( "#size-slider" ).slider( "option", "value", {{wishlist_item.image_width}});
				
				{% if wishlist_item.print_medium_id %}
					print_medium_change("{{wishlist_item.print_medium_id}}", fetch_img=true, set_defaults=false);
				{% endif %}
				
				{% if wishlist_item.moulding_id %}
					moulding_change("{{wishlist_item.moulding_id}}");
				{% endif %}

				{% if wishlist_item.mount_id %}
					mount_id_change("{{wishlist_item.mount_id}}");
				{% endif %}

				{% if wishlist_item.mount_size %}
					mount_size_change("{{wishlist_item.mount_size}}");
				{% endif %}

			{% endif %}
			calc_total_price();
		}
			
	</script>
	
	
	<script>
	
		function getFramedImg (prod_id, m_id, m_color, mount_size) {
			var currwidth = parseFloat($("#size-slider").slider("value"));
			/////////////////////////
			currwidth = 10;					
			/////////////////////////
			var mnt_color = '';
			var mnt_size = '0'
			if (get_print_medium_id() == 'PAPER') {
				mnt_color = get_mount_color();
				mnt_size = get_mount_size()
			} else {
				mnt_color = '';
				mnt_size = '0'			
			}

			var str_canvas = 'NO';
			if (get_stretch_id() == '1') {
				str_canvas = 'YES';			
			}
			
			
			// Get the framed image
			$.ajax({
					url: "{% url 'get_framed_image' %}", 
					data: {'prod_id':prod_id, 'moulding_id': moulding_id,
							'mount_color':mnt_color, 'mount_size':mnt_size, 'image_width':currwidth,
							'stretched_canvas': str_canvas
						}, 
					dataType: 'text', 
				success: function (data) {
					document.getElementById("prod-img").src = "data:image/png;base64," + data;						
					document.getElementById("prod-img-card").src = "data:image/png;base64," + data;
					document.getElementById("prod-img-card-thumb").src = "data:image/png;base64," + data;
					
					document.getElementById("card0").src = "data:image/png;base64," + data;
					document.body.scrollTop = 0; // For Safari
					document.documentElement.scrollTop = 0;
					},
				error: function(xhr){
					alert("An error occured: " + xhr.status + " " + xhr.statusText); 
				}
			});
		}
	
	</script>
	
	<script>
		function set_size_slider(isize) {

			maxsize = parseFloat("{{product.max_width}}");
			if (parseFloat("{{product.max_width}}") > 40 && parseFloat("{{product.max_height}}") > 40) {
				if (ratio > 1) {
					maxsize = Math.ceil( 40 * ratio );
				} else {
					maxsize = 40;
				}
			}
			if (ratio > 1){
				//////
				minsize = Math.round(8 * ratio);
			}
			
			{% if product.artist == "Huynh, Duy" %}
				if (ratio > 1){
					var hgt = 16;
					var wdth = Math.round(16 * {{product.aspect_ratio}});
					minsize = wdth;
				} else {
					minsize = 16;
				}
			{% endif %}

			
			if ( $( "size-slider" ).slider( "instance" ) != null ) { 
				if (isize == $( "#size-slider" ).slider( "value" ) ){
					return;
				}
			}
			
			/*
			var mnt = get_mount_id();
			if ( parseFloat(get_mount_size()) > 0 )  {
				if (mnt == 2 || mnt == 5) {
					if (ratio > 1) {
						maxsize = 33
					} else {
						maxsize = Math.ceil( 44 * ratio );;
					}
				} else {
					if (mnt == 1 || mnt == 3 || mnt == 4) {
						if (ratio > 1) {
							maxsize = 40
						} else {
							maxsize = Math.ceil( 60 * ratio );;
						}
					}
				}
			}
			*/
			
			$("#size-slider").slider({
				value:isize,
				min:minsize,
				max:maxsize,
				step:1,
				change:function(event, ui){
					var currwidth = ui.value;
					//var currheight = Math.round(currwidth / ratio);
					var currheight = roundNum(currwidth / ratio);
					//$("#size").html("Width: " + currwidth + ", Height: " + currheight);
					set_image_width(currwidth);
					set_image_height(currheight);
					$("#i_width").val(currwidth);
					$("#i_height").val(currheight);


					{% for key, value in ready_prod_data_paper.items %}
						if ({{value.PAPER_WIDTH_UNFRAMED}} == currwidth) {
							$('#paper-size-{{value.PAPER_WIDTH_UNFRAMED}}').addClass("p_clicked");
						} else {
							$('#paper-size-{{value.PAPER_WIDTH_UNFRAMED}}').removeClass("p_clicked");				
						}
					{% endfor %}
					
					{% for key, value in ready_prod_data_canvas.items %}
						if ({{value.CANVAS_WIDTH_UNFRAMED}} == currwidth) {
							$('#canvas-size-{{value.CANVAS_WIDTH_UNFRAMED}}').addClass("p_clicked");
						} else {
							$('#canvas-size-{{value.CANVAS_WIDTH_UNFRAMED}}').removeClass("p_clicked");	
						}
					{% endfor %}
					
					//set_selected_ready_prod_border(currwidth);
					
					print_size_display(currwidth, currheight);
					calc_total_price();
					
					
					if ( fetch_img_on_slide == true ) {
						fetch_img_on_slide = false;
 						getFramedImg (product_id, moulding_id, mount_color, mount_size);
						get_cards();
					} else {
						get_cards();
					}					
				}
			});

			calc_total_price();
		}
	
	</script>
	

	<script>
	function calc_total_price(){
		//var ratio = parseFloat("{{product.aspect_ratio}}"); 
		var currwidth = parseFloat($("#size-slider").slider("value"));
		//var currheight = Math.round(currwidth / ratio);
		var currheight = roundNum(currwidth / ratio);
		var sqin = currwidth * currheight;
		var rnin = (currwidth + currheight) * 2;
		var image_price = 0;
		var total_price = 0;
		var acr_id = get_acrylic_id();
		var brd_id = get_board_id();
		var mnt_id = get_mount_id();
		
		//Get Print Medium
		//var print_medium = $('#print-medium-select').val();
		var print_med = get_print_medium_id();
		
		// Set the pricing compoenents appropriately:
		if (print_med == 'PAPER') {
			if (moulding_id == '0' || moulding_id == '' || moulding_id == null){
				acr_id = '0';
				brd_id = '0';
				mnt_id = '0';
			}
			set_stretch_id('0');
		} else {
			if (document.getElementById('in_stretched').checked) {				
				set_stretch_id('{{stretches.stretch_id}}');
			} else {
				set_stretch_id('0');
			}
				
			acr_id = '0';
			brd_id = '0';
			mnt_id = '0';
		}
			
			
		// Form the pricing components
		json = '{ ' + 
				'"IMAGE": {"WIDTH":' + currwidth + ', "HEIGHT":' + currheight + '}, ' + 
				'"PRINT_MEDIUM": {"ID" :"' + print_med + '", "SIZE":' + sqin + '}, ' +
				'"ACRYLIC": {"ID" :' + acr_id + ', "SIZE":' + sqin + '}, ' +
				'"MOULDING": {"ID" :' + moulding_id + ', "SIZE":' + rnin + '}, ' +
				'"MOUNT": {"ID" :' + mnt_id + ', "SIZE":' + mount_size + '}, ' +
				'"BOARD": {"ID" :' + brd_id + ', "SIZE":' + sqin + '}, ' +
				'"STRETCH": {"ID" :' + stretch_id + ', "SIZE":' + rnin + '}, ' +
				'"PRODUCT": {"ID" :' + product_id + ', "SIZE":' + rnin + '}, ' +
				'"PRODUCT_TYPE": {"ID" :"STOCK-IMAGE", "SIZE":' + rnin + '} ' +
				'}';			
		
		
		// GET ITEM PRICE
		$.ajax({
				url: "{% url 'get_item_price' %}", 
				data: json, 
				dataType: 'text', 
				type: 'POST',
				success: function (data) {
					data = JSON.parse(data);
					msg = data.msg.toUpperCase();
					if (data.msg.toUpperCase() == 'SUCCESS') { 
						if (data.disc_applied) {
							$("#no-disc").hide();
							$("#promo-display").show("slow");
							$("#item_unit_price").html(data.item_unit_price);
							$("#item_total_price").html(data.item_price);
							if ( parseInt(data.cash_disc) > 0 ) {
								$("#disc").html("(" + data.cash_disc + " off)");
							} else if( parseInt(data.percent_disc) > 0 ) {
								$("#disc").html("(" + data.percent_disc + "% off)");
							}
							
							$("#item_unit_price_nv").html(data.item_unit_price);
							$("#promotion_id_nv").html(data.promotion_id);
							$("#disc_amt_nv").html(data.disc_amt);
							$("#item_total_price_nv").html(data.item_price);
							$("#prod-price-cart").html(data.item_price);
							
						} else {
							$("#promo-display").hide();
							$("#no-disc").show();
							$("#prod-price").html(data.item_price);
							$("#prod-price-cart").html(data.item_price);

							$("#item_unit_price_nv").html(data.item_unit_price);
							$("#item_total_price_nv").html(data.item_price);
							$("#promotion_id_nv").html('');
							$("#disc_amt_nv").html('');
						}
					} else {
						alert(msg);
							$("#promo-display").hide();
							$("#no-disc").show();
							
							$("#item_unit_price_nv").html(data.item_unit_price);
							$("#item_total_price_nv").html(data.item_price);
							$("#promotion_id_nv").html('');
							$("#disc_amt_nv").html('');
					}
				},
				error: function(xhr){
					//alert("An error occured: " + xhr.status + " " + xhr.statusText); 
				}
		});		
	}		
	</script>
	
	
	<script>
		function addProdToCart(prod_id, qty) {
			var cart_qty;
			var total_price = $("#item_total_price_nv").html();	
			if (total_price == '0'){
				alert("Sorry, this product is not available.");
				return;
			}			
			var discount = $("#disc").html();
			var promotion_id = $("#promotion_id_nv").html();
			var disc_amt = $("#disc_amt_nv").html();
			var item_unit_price = $("#item_unit_price_nv").html();

			var m_size = parseInt($('#mount-size').val());
			if(typeof m_size == "undefined"){			
				alert("Sorry, mount width can be between 1 and 5 inch.");
				return;
			}
			if ( m_size > 5 ){
				alert("Sorry, mount width can be between 1 and 5 inch.");
				return;
			}
			
			//var ratio = parseFloat("{{product.aspect_ratio}}"); 
			var currwidth = parseFloat($("#size-slider").slider("value"));
			//var currheight = Math.round(currwidth / ratio);
			var currheight = roundNum(currwidth / ratio);
			var sqin = currwidth * currheight;
			
			//print_medium_id = $('#print-medium-select').val();
			print_medium_id = get_print_medium_id();
			print_medium_size = sqin;
			moulding_size = (currwidth + currheight) * 2;
			//mount_size = (currwidth + currheight) * 2;  // Taken from the mout_size set earlier (not sqin)
			acrylic_size = currwidth * currheight;
			board_size = currwidth * currheight;
			stretch_size = (currwidth + currheight) * 2;
			
			var acr_id = '';
			var brd_id = '';
			var str_id = '';
			var mnt_id = '';
			if (print_medium_id == 'CANVAS') {
				var str_id = get_stretch_id();
				mnt_id = '0'
			} else {
				if (moulding_id != '' && moulding_id != '0') {
					var acr_id = get_acrylic_id();
					var brd_id = get_board_id();
					mnt_id = get_mount_id();
				} else {
					var acr_id = '';
					var brd_id = '';
					mnt_id = '';
				}
				var str_id = '';
			}
			
			//
			var cart_item_flag = 'FALSE';
			{% if cart_item %}
				cart_item_flag = 'TRUE';
			{% endif %}
			
			// Update the cart
			$.ajax({
				url: "{% url 'add_to_cart' %}", 
				data: {'prod_id':prod_id, 'qty':qty, 'moulding_id': moulding_id,
						'width':currwidth, 'height':currheight,
						'moulding_size' : moulding_size,
						'print_medium_id':print_medium_id, 'print_medium_size':print_medium_size, 
						'mount_id':mnt_id, 'mount_size':mount_size,
						'mount_w_left' : mount_w_left, 'mount_w_right':mount_w_right, 
						'mount_w_top':mount_w_top, 'mount_w_bottom' : mount_w_bottom, 
						'acrylic_id':acr_id, 'acrylic_size':acrylic_size,
						'board_id':brd_id, 'board_size':board_size, 'stretch_id':str_id,
						'stretch_size':stretch_size, 
						'total_price':total_price, 'image_width':currwidth, 'image_height':currheight,
						'discount':discount, 'promotion_id':promotion_id, 'disc_amt':disc_amt,
						'item_unit_price':item_unit_price, 'prod_type':'STOCK-IMAGE',
						'cart_item_flag':cart_item_flag}, 
				dataType: 'text', 
					type: 'POST',
				success: function (data) {
					data = JSON.parse(data);
					if (data.msg.toUpperCase() != 'SUCCESS'){
							alert(data.msg);
					} else {					
							
						cart_qty = data.cart_qty;
						//Update items in cart
						//$("#itemsincart").html(cart_qty); 
						updateCartItemsNum(cart_qty);
						$('#cart-msg-modal').modal('show');					

						/*
						{% if env == 'PROD' %}
						gtag('event','add_to_cart', {
						  'value': total_price,
						  'items':[{
						  'id':prod_id,
						  'location_id': '',
						  'google_business_vertical': 'custom',
						  }]
						  });
						{% endif %}
						*/
					}
				},
				error: function(xhr){
					alert("An error occured: " + xhr.status + " " + xhr.statusText); 
				}
			});

		}
			
		// ---- Add Product to Cart ----//
		function addProdToWishlist(prod_id, qty) {
			var cart_qty;
			var total_price = $("#item_total_price_nv").html();
			if (total_price == '0'){
				alert("Sorry, this product is not available.");
				return;
			}
			var discount = $("#disc").html();
			var promotion_id = $("#promotion_id_nv").html();
			var disc_amt = $("#disc_amt_nv").html();
			var item_unit_price = $("#item_unit_price_nv").html();
	
			var img = document.getElementById('prod-img');
			var width = img.naturalWidth;
			var height = img.naturalHeight;
			var img = document.getElementById('prod-img');
			var currwidth = parseFloat($("#size-slider").slider("value"));
			//var currheight = Math.round(currwidth / ratio);
			var currheight = roundNum(currwidth / ratio);
			var sqin = currwidth * currheight;
			
			//print_medium_id = $('#print-medium-select').val();
			print_medium_size = sqin;
			moulding_size = (currwidth + currheight) * 2;
			acrylic_size = currwidth * currheight;
			board_size = currwidth * currheight;
			stretch_size = (currwidth + currheight) * 2;
			
			if (print_medium_id == 'CANVAS') {
				var acr_id = '';
				var brd_id = '';
				var str_id = get_stretch_id();
			} else {
				var acr_id = get_acrylic_id();
				var brd_id = get_board_id();
				var str_id = '';
			}

			//
			var wishlist_item_flag = 'FALSE';
			{% if wishlist_item %}
				wishlist_item_flag = 'TRUE';
			{% endif %}
			
			// Update the cart
			$.ajax({
				url: "{% url 'add_to_wishlist' %}", 
				data: { 'prod_id':prod_id,'qty':qty, 
						'width':currwidth, 'height':currheight, 'moulding_id': moulding_id,
						'moulding_size' : moulding_size,
						'print_medium_id':print_medium_id, 'print_medium_size':print_medium_size, 
						'mount_id':mount_id, 'mount_size':mount_size,
						'mount_w_left' : mount_w_left, 'mount_w_right':mount_w_right, 
						'mount_w_top':mount_w_top, 'mount_w_bottom' : mount_w_bottom, 
						'acrylic_id':acr_id, 'acrylic_size':acrylic_size,
						'board_id':brd_id, 'board_size':board_size, 'stretch_id':str_id,
						'stretch_size':stretch_size, 
						'total_price':total_price, 'image_width':currwidth, 'image_height':currheight,
						'discount':discount, 'promotion_id':promotion_id, 'disc_amt':disc_amt,
						'item_unit_price':item_unit_price,  'prod_type':'STOCK-IMAGE',
						'wishlist_item_flag':wishlist_item_flag}, 
				dataType: 'text', 
					type: 'POST',
				success: function (data) {
					data = JSON.parse(data);
					cart_qty = data.cart_qty;
					//Update items in cart
					$('#msg-wishlist-modal').modal('show');
				},
				error: function(xhr){
					alert("An error occured: " + xhr.status + " " + xhr.statusText); 
				}
			});

		}				
	
	</script>
	
	<script>
		function addToFav(prod_id, currwidth, aspect_ratio, total_price,
				discount, promotion_id, disc_amt, item_unit_price){
			//currheight = Math.round(currwidth / aspect_ratio);
			currheight = roundNum(currwidth / aspect_ratio);
			var qty = 1; var mld_id = 0; var moulding_size = 0; 
			var print_med = 'PAPER'; var print_medium_size = currheight * currwidth;
			var mnt_id = 0; var mnt_size = 0; var mnt_w_left =0; var mnt_w_right = 0;
			var mnt_w_top =0; var mnt_w_bottom = 0; var acr_id = 1;
			var acrylic_size = currheight * currwidth; var brd_id = 0; var board_size = 0;
			var strch_id = 0; var stretch_size = 0; var discount = 0;
		
			$.ajax({
				url: "{% url 'add_to_wishlist' %}", 
				data: { 'prod_id':prod_id,'qty':qty, 
						'width':currwidth, 'height':currheight, 'moulding_id': mld_id,
						'moulding_size' : moulding_size,
						'print_medium_id':print_med, 'print_medium_size':print_medium_size, 
						'mount_id':mnt_id, 'mount_size':mnt_size,
						'mount_w_left' : mnt_w_left, 'mount_w_right':mnt_w_right, 
						'mount_w_top':mnt_w_top, 'mount_w_bottom' : mnt_w_bottom, 
						'acrylic_id':acr_id, 'acrylic_size':acrylic_size,
						'board_id':brd_id, 'board_size':board_size, 'stretch_id':strch_id,
						'stretch_size':stretch_size, 
						'total_price':total_price, 'image_width':currwidth, 'image_height':currheight,
						'discount':discount, 'promotion_id':promotion_id, 'disc_amt':disc_amt,
						'item_unit_price':item_unit_price,  'prod_type':'STOCK-IMAGE'}, 
				dataType: 'text', 
					type: 'POST',
				success: function (data) {
					data = JSON.parse(data);
					cart_qty = data.cart_qty;
					$('#fav_'+prod_id).html('<i class = "fa fa-heart" onclick = "deleteItem(' + prod_id + ')"style="color:red; padding-right:5px;" data-toggle="tooltip" title="Added to Favorites!"></i>');
					/* $('#msg-wishlist-modal').modal('show');
					setTimeout(function() {
						$('#msg-wishlist-modal').modal('hide');
						}, 1000);
					*/
				},
				error: function(xhr){
					alert("An error occured: " + xhr.status + " " + xhr.statusText); 
				}
			});	
		}
	</script>


	<script>
		function show_streched_img(){
			$("#show_streched_img").modal('show');	
		}
	</script>
	
	
	<script>
		function getFramedImgForReadyProd(prod_id, prod_width, p_medium) {

			// Get the framed image
			$.ajax({
					url: "{% url 'get_ready_products' %}", 
					data: {'prod_id':prod_id, 'prod_width':prod_width, 'print_medium':p_medium}, 
					dataType: 'text', 
					type: 'POST', 
				success: function (data) {
					if (p_medium == 'PAPER') {
						document.getElementById("prod-width-" + prod_width + '-paper').src = "data:image/png;base64," + data;
					} else {
						document.getElementById("prod-width-" + prod_width + '-canvas').src = "data:image/png;base64," + data;
					}
				},
				error: function(xhr){
					alert("An error occured: " + xhr.status + " " + xhr.statusText); 
				}
			});
		}
	</script>
	
	<script>
		function set_ready_product(print_med, p_width, unframed_width, fetch_img=true){

			var prod_id = get_product_id();
			set_size_slider(unframed_width);
			if (print_med == 'PAPER') {
				
				set_default_frame_mount()
				/* set_mount_id(def_mount_id);
				if (unframed_width <= 24) {
					set_mount_size('1');
					set_moulding_id('18');
				} else if (unframed_width <= 42) {
					set_mount_size('2');
					set_moulding_id('24');
				} else {
					set_mount_size('3');
					set_moulding_id('24');
				}
				set_mount_color('#fffff0');*/
				
				set_board_id('1');
				set_acrylic_id('1');
				set_stretch_id('0');
			} else {
				set_mount_id('0');
				set_mount_size('1');
				set_mount_color('');
				set_board_id('0');
				set_acrylic_id('0');
				
				set_default_frame_mount();
				/*if (unframed_width <= 24) {
					set_moulding_id('18');
				} else if (unframed_width <= 42) {
					set_moulding_id('24');
				} else {
					set_moulding_id('24');
				}*/
				set_stretch_id('1');
			}
			print_size_display(image_width, image_height);
			$('#no-frame').prop('checked', false);
			
			/*
			if  ( fetch_img == false ){
				fetch_img_on_slide = true;
			}
			*/
			
			var p_id = "paper-size-"+ p_width.toString();
			var c_id = "canvas-size-"+ p_width.toString();
			
			
			{% for key, value in ready_prod_data_paper.items %}
				if ("paper-size-{{value.PAPER_WIDTH}}" == p_id) {
					$('#paper-size-{{value.PAPER_WIDTH}}').addClass("p_clicked");
				} else {
					$('#paper-size-{{value.PAPER_WIDTH}}').removeClass("p_clicked");				
				}
			{% endfor %}
			
			//set_selected_ready_prod_border(p_width);
			//set_selected_ready_prod_border(p_width);
		}
		
	</script>
	
	<script>
		function set_selected_ready_prod_border(p_width) {
			
			var p_id = "paper-"+ p_width.toString();
			var c_id = "canvas-"+ p_width.toString();
			
			{% for key, value in ready_prod_data_paper.items %}
				if ("paper-{{value.PAPER_WIDTH_UNFRAMED}}" == p_id) {
					$('#paper-{{value.PAPER_WIDTH_UNFRAMED}}').css({ border: "1px solid #11b6bd"});
				} else {
					$('#paper-{{value.PAPER_WIDTH_UNFRAMED}}').css({ border: "none"});
				}
			{% endfor %}
			
			{% for key, value in ready_prod_data_canvas.items %}
				if ("canvas-{{value.CANVAS_WIDTH_UNFRAMED}}" == c_id) {
					$('#canvas-{{value.CANVAS_WIDTH_UNFRAMED}}').css({ border: "1px solid #11b6bd"});
				} else {
					$('#canvas-{{value.CANVAS_WIDTH_UNFRAMED}}').css({ border: "none"});
				}
			{% endfor %}		
		}
	</script>

	<script>
	function get_cards(){
		// Get the card
		var prod_id = get_product_id();
		var currwidth = parseFloat($("#size-slider").slider("value"));
		var m_id = get_moulding_id();
		var mnt_color = '';
		var mnt_size = '0'
		if (get_print_medium_id() == 'PAPER') {
			mnt_color = get_mount_color();
			mnt_size = get_mount_size()
		} else {
			mnt_color = '';
			mnt_size = '0';			
		}
		var str_canvas = 'NO';
		if (get_stretch_id() == '1') {
			str_canvas = 'YES';			
		}


		var src = document.getElementById("card1").src.trim();
		if ((m_id != '' && m_id != '0') || (str_canvas == 'YES')) {
			if (src == '') {
				// Get the framed image
				$.ajax({
						url: "{% url 'get_framed_image' %}", 
						data: {'prod_id':prod_id, 'moulding_id': m_id,
								'mount_color':mnt_color, 'mount_size':mnt_size, 'image_width':currwidth,
								'stretched_canvas': str_canvas, 'imgtilt': 'NO'
							}, 
						dataType: 'text', 
					success: function (data) {
						document.getElementById("card1").src = "data:image/png;base64," + data;
						document.getElementById("prod-card1").src = "data:image/png;base64," + data;				
						$("#card1").css('display', 'block');
						$("#prod-card1").css('display', 'block');
						},
					error: function(xhr){
						alert("An error occured: " + xhr.status + " " + xhr.statusText); 
					}
				});
			}
		} else {
			$("#card1").css('display', 'none');
			$("#prod-card1").css('display', 'none');
		}

		$.ajax({
				url: "{% url 'get_catalog_card' %}", 
				data: {'card_no': '2', 'prod_id':prod_id, 'moulding_id': m_id,
						'mount_color':mnt_color, 'mount_size':mnt_size, 
						'image_width':currwidth, 'prod_type':'STOCK-IMAGE'
					}, 
				dataType: 'text', 
			success: function (data) {
				document.getElementById("card2").src = "data:image/png;base64," + data;
				document.getElementById("prod-card2").src = "data:image/png;base64," + data;				
				},
			error: function(xhr){
				alert("An error occured: " + xhr.status + " " + xhr.statusText); 
			}
		});
	}
	</script>
	<script>
	$( "#card0" ).hover(function() {
		var src = document.getElementById("card0").src;
		document.getElementById("prod-img").src = src;
	});
	$( "#card1" ).hover(function() {
		var src = document.getElementById("card1").src;
		document.getElementById("prod-img").src = src;
	});
	$( "#card2" ).hover(function() {
		var src = document.getElementById("card2").src;
		document.getElementById("prod-img").src = src;
	});
	$( "#card3" ).hover(function() {
		var src = document.getElementById("card3").src;
		document.getElementById("prod-img").src = src;
	});
		
	/*
	$( "#card5" ).hover(function() {
		var src = document.getElementById("card5").src;
		document.getElementById("prod-img").src = src;
	});
	*/
	
	$( "#prod-img-card-thumb" ).click(function() {
		var src = document.getElementById("prod-img-card-thumb").src;
		document.getElementById("prod-img-card").src = src;
	});
	$( "#prod-card1" ).click(function() {
		var src = document.getElementById("prod-card1").src;
		document.getElementById("prod-img-card").src = src;
	});
	$( "#prod-card2" ).click(function() {
		var src = document.getElementById("prod-card2").src;
		document.getElementById("prod-img-card").src = src;
	});
		
	
	</script>
	
	<script>
	function show_size_color_tool(){
		var frame_width = image_width;
		var frame_height = image_height;
		if (moulding_id != '0' && moulding_id != ''){
			if (get_print_medium_id() == 'PAPER') {
				{% for f in paper_mouldings_show %}
					if ('{{f.moulding_id}}' == moulding_id) {			
						f_size = {{f.moulding__width_inner_inches}};
					}
				{% endfor %}
			} else {			
				{% for f in canvas_mouldings_show %}
					if ('{{f.moulding_id}}' == moulding_id) {			
						f_size = {{f.moulding__width_inner_inches}};
					}
				{% endfor %}
			}
			frame_width = frame_width + f_size*2;
			frame_height = frame_height + f_size*2;
			
			if (print_medium_id == 'PAPER'){
				var mnt_color = '';
				if (mount_id != '0' && mount_id != '') {
					mnt_size = parseFloat(mount_size);
					frame_width = frame_width + mnt_size*2;
					frame_height = frame_height + mnt_size*2;					
				}
			}
		}
		$('#a_width').val(frame_width);
		$('#a_height').val(frame_height);
		$('#wall-color-tool').modal('show');
		show_wall_tool();
	}
	</script>
	
	<script>
		$('.nav-tabs a').on('shown.bs.tab', function(event){
			$('.frames-slider').slick('setPosition');	
		});		
		
	</script>
	
	<script>
		function donwloadImage() {		
			var img_src = document.getElementById("prod-img").src;
			var fileName = String(get_product_id()) + "_img.jpg";			
			var link = document.createElement("a");
			document.body.appendChild(link); // for Firefox
			link.setAttribute("href", img_src);
			link.setAttribute("download", fileName);
			link.click();
		}
	</script>
	<script>
		function roundNum(value) {
			var x = Math.floor(value);
			if ((value - x) <= 0.50) {
				return x;
			} else {
				return Math.ceil(value);
			}
		}
	</script>
	<script>
	window.onscroll = function() {scrollFunction()};

	var scrbutton = document.getElementById("scrollBtn");

	function scrollFunction() {
	  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
		scrbutton.style.display = "block";
	  } else {
		scrbutton.style.display = "none";
	  }
	}

	// When the user clicks on the button, scroll to the top of the document
	function topFunction() {
	  document.body.scrollTop = 0;
	  document.documentElement.scrollTop = 0;
	}
	</script>	
	{% endblock jscripts %}	
	
	{% block tawkto %}
	{% endblock tawkto %}
